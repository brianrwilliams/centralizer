\documentclass[11pt]{amsart}

\usepackage{macros}
\usepackage[bbgreekl]{mathbbol}

\linespread{1.25}

%\usepackage[final]{pdfpages}

\setcounter{tocdepth}{2}
\numberwithin{equation}{section}



\def\brian{\textcolor{blue}{BW: }\textcolor{blue}}
\def\owen{\textcolor{magenta}{OG: }\textcolor{magenta}}
\def\mahmoud{\textcolor{olive}{MZ: }\textcolor{olive}}
\def\greg{\textcolor{red}{GG: }\textcolor{red}}


\begin{document}
\title{Centers and centralizers of higher enveloping algebras of Lie algebras}

%\author{Owen Gwilliam}
%\address{Department of Mathematics and Statistics \\
%Lederle Graduate Research Tower, 1623D \\
%University of Massachusetts Amherst \\
%710 N. Pleasant Street}
%\email{gwilliam@math.umass.edu}
%
%\author{Brian Williams}
%\address{Department of Mathematics, 
%Northeastern University \\ 
%567 Lake Hall \\ 
%Boston, MA 02115 \\ U.S.A.}
%\email{br.williams@northeastern.edu}


\maketitle
\thispagestyle{empty}




\tableofcontents

\section{Introduction}
 
Recently, a generalization of the concept of the enveloping algebra of a Lie algebra has emerged: 
each dg Lie algebra $\fg$ has an enveloping $\EE_n$ algebra $\UU_n\fg$, for every $n$, 
so that $\UU_1\fg$ is the usual enveloping algebra $U\fg$. 
Building on prior work \cite{BD, AF} [Owen's thesis?], 
Knudsen \cite{Knudsen} developed these ideas extensively and offered a useful factorization algebra model for the enveloping $\EE_n$ algebra. 
Our central goal here is to generalize the some well-known results about the enveloping algebra $U\fg$ to $\UU_n\fg$, for all $n$, such as
\begin{enumerate}
\item[(1)] the (underived) center of $U\sl_{N+1}$ is isomorphic to $(\Sym(\CC^{N}))^{S_N}$, where $\CC^{N}$ denotes the Cartan subalgebra of $\sl_{N+1}$ and $S_N$ is the Weyl group of $SL_{N+1}$, and
\item[(2)] the derived center of the enveloping algebra $U\fg$ is given by derived invariants of the adjoint action of $\fg$ on $U\fg$. That is to say $\Hoch^*(U\fg,U\fg) \simeq \clies(\fg, U\fg)$.
\end{enumerate}
\owen{And keep going just a little.}
%
%Our results pertains to (1) by taking $N \to \infty$, and to (2) through the derived {\em centralizer} of the map $\UU_n\sl_\infty \hookrightarrow \UU_n\fgl_\infty(A)$, where $A$ is a dg algebra. Note that the usual derived center is the centralizer of the identity map $\UU_n\fg \to \UU_n\fg$.
%
%We will review these notions and describe our results in detail Min the next section. When $n=1$,  \owen{state the classical thing here!}
%
%Our primary tool here is the Loday-Quillen-Tsygan (LQT) theorem which describes the large $N$ limit of the Lie algebra homology of $\fgl_N(A)$, for a dg associative algebra $A$. Since the enveloping $\EE_n$ algebra of a Lie algebra can be constructed as a locally constant factorization algebra made out of the shifted Chevalley-Eilenberg chains \cite{}, the relevance of the LQT theorem in this context  should be apparent. From this point of view, one can think of our main result as an $\EE_n$ generalization of the LQT theorem. We hope these ideas have exciting applications in quantum field theory and random matrix theory, as well as to other large $N$ limit phenomena.

\subsection{Overview of the paper}

\subsection{Acknowledgments}

\subsection{Notations}

\begin{rmk}
Throughout this document, we will work with differential graded vector spaces over a field $k$ of characteristic zero. We refer to dg Lie algebras simply as Lie algebra, and refer to those without grading and a differential, such as $\sl_2(\CC)$, as ordinary Lie algebras. Similarly, the term algebra means dg algebra unless stated otherwise.
\end{rmk}

\begin{rmk}
We state our theorems in terms of the stable $\infty$-category of cochain complexes 
instead of the stable model categories or pre-triangulated dg categories. 
Many of our constructions, however, involve explicit manipulations of standard complexes, 
and when it is helpful, we indicate the level at which we are working.
\end{rmk}

\owen{We should collect here a list of notations, such as}

Let $\Ch_k^{\otimes_k}$ be the symmetric monoidal stable $\infty$-category arising from cochain complexes of vector spaces over a characteristic zero field $k$.
Let ${\tt Ch}_k^{\otimes_k}$ denote the symmetric monoidal stable model category of cochain complexes of vector spaces over a characteristic zero field $k$ ETC.

\greg{need to add a notation/convention somewhere including that $\Sigma^n$ will be shift functor, convention for grading and so on}

\section{Our main results}

See section~\ref{sec: en background} for a brief discussion of $\EE_n$ algebras and their relationship with locally constant factorization algebras on $\RR^n$, section~\ref{sec: enveloping} for a brief discussion of the enveloping $\EE_n$ algebra construction, and see section~\ref{sec: centralizer} 
for a brief discussion about centralizers to maps of $\EE_n$ algebras.

\subsection{The central theorem and its proof strategy}

%\owen{An approximate version of our main theorem. It's not terrible but I'd like to make the statement more accurate and perhaps punchier.}

Even to state our central result, we need to review a few results and terminology.
First, our basic context is $\EE_n$ algebras.
By $\EE_n$ we mean any operad or colored operad or $\infty$-operad equivalent to the topological operad of little $n$-disks in $\RR^n$, where the notion of equivalence is in some appropriate $\infty$-categorical setting of operads. 
In particular, we will require that its $\infty$-category of algebras in $\Ch_k^{\otimes_k}$ agree with those of the little $n$-disks operad. 
For us the preferred presentation is by locally constant factorization algebras on $\RR^n$,
which, as we explain below, can be understood via a colored operad whose colors are open sets in~$\RR^n$.

Many notions from ordinary algebra admit natural generalizations to $\EE_n$ algebras.
For instance, to each Lie algebra $\fg$ (and more generally $L_\infty$ algebra),
there is an {\em enveloping $\EE_n$ algebra} $\UU_n \fg$, thanks to \cite{Knudsen}.
Similarly, every $\EE_n$ algebra $A$ has a {\em center} ${\frak Z}_n(A)$, which is an $E_{n+1}$ algebra and hence more commutative than~$A$.
More generally, for any map of $\EE_n$ algebras $f: A \to B$, there is a {\em centralizer} ${\frak Z}_n(f)$, 
which is a generalization of the commutant.
We review these notions more fully in Section~\ref{sec: background}.

Our work here relies on a concrete and convenient model for these enveloping $\EE_n$ algebras by factorization algebras.
In particular, thanks again to \cite{Knudsen}, 
we know that the $\EE_n$ enveloping algebra $\UU_n \fg$ admits a model $\bU_n \fg$ whose underlying functor on the poset of open sets in $\RR^n$ assigns $\cliels(\Omega_c^*(V) \otimes \fg)$ to each open set~$V$.
There is another factorization algebra whose underlying assigns $\clies(\Omega^\bu(V) \otimes \fg)$ to each open~$V$.
Our paper shows that such factorization algebras model other important $\EE_n$ algebras, notably centralizers.

\begin{thm}
\label{thm: centralizer}
Let $\fg$ and $\fh$ be $L_\infty$ algebras over the real or complex numbers, 
and let $f: \fg \rightsquigarrow \fh$ be a homotopy-coherent morphism of $L_\infty$ algebras
(i.e., a map of conilpotent cocommutative coalgebras $f: \cliels(\fg) \to \cliels(\fh)$).
This map determines functorially a map of $\EE_n$ algebras
\[
\UU_n f: \UU_n \fg \to \UU_n \fh
\]
between their enveloping $\EE_n$ algebras.
The centralizer of this map ${\frak Z}_n(\UU_n f)$ is an $\EE_n$ algebra modeled by the factorization algebra 
\[
\clies(\Omega^\bu \otimes \fg, \cliels(\Omega^\bu_c \otimes \fh)_f)
\]
equipped with a convolution-type product,
where the subscript $f$ indicates how $\cliels(\Omega^\bu_c \otimes \fh)$ is a module over $\Omega^\bu \otimes \fg$.
\end{thm}

{\em Nota bene:}\/ For concision --- and since it is essentially the only kind of map we deal with in this paper --- we simply write $f: \UU_n \fg \to \UU_n \fh$ for the map $\UU_n(f)$ arising from the $L_\infty$ map $f: \fg \rightsquigarrow \fh$.
Likewise, we write ${\frak Z}_n(f)$ instead of~${\frak Z}_n(\UU_n f)$.

\owen{I think we could (and maybe should) also discuss the $\EE_n$ Koszul dual situation involving cochains.}

\def\Disk{{\rm Disk}}

Our proof involves explicit manipulations with cochain complexes and the poset of opens in~$\RR^n$.
To connect that setting with the abstract $\infty$-categorical setting above,
we leverage deep, prior work:
\begin{itemize}
\item Lurie \cite{LurieHA} explains why the $\infty$-category of $\EE_n$ algebras is equivalent to the homotopy-coherent version of locally constant prefactorization algebras on $\RR^n$.  
In fact, he simplifies the situation a bit more. 
Let $\Disk_n^\sqcup$ denote the colored operad whose colors are balls in $\RR^n$ and whose spaces of operations are either empty or a point, depending on whether the input balls are pairwise disjoint and subsets of the output ball. 
One can work with locally constant, homotopy-coherent $\Disk_n^\sqcup$ algebras.
\item Knudsen verifies that we can model the enveloping $\EE_n$ algebra by the factorization algebra $\bU_n \fg$ described earlier.
\item Francis and Lurie give a characterization of the centralizer ${\frak Z}_n(f)$ of any $\EE_n$ algebra map $\phi: A \to B$ as the ``internal hom'' in left $\int_{S^{n-1}}A$-modules from $A$ to $B_\phi$, where $B_\phi$ denotes $B$ viewed as a left module via the map~$\phi$.
\item In combination, the centralizer is characterized up to quasi-isomorphism, 
since it is easy to compute the factorization homology of the enveloping algebra $\UU_n \fg$ over a sphere.
\end{itemize}
In \S2 we review these results in more detail with an emphasis on what we need for our central theorem.

Here is an outline of our proof:
\begin{enumerate}
\item Let ${\bf f}: \cliels(\Omega_c^* \otimes \fg) \to \cliels(\Omega_c^* \otimes \fh)$ denote a map of factorization algebras that models with map $\UU_n f$ between enveloping algebras. 
We use it to produce an explicit factorization algebra $\clies(\Omega \otimes \fg, \cliels(\Omega_c^* \otimes \fh)_f)$ as a kind of ``convolution factorization algebra.'' 
\item We show this object fits canonically into a centralizer diagram: there is a map of factorization algebras
\[
\clies(\Omega \otimes \fg, \cliels(\Omega_c^* \otimes \fh)_f) \otimes \bU_n \fg \to \cliels(\Omega_c^* \otimes \fh)
\]
such that precomposing with the map $1 \otimes \id_{\UU_n \fg}$ is the map~${\bf f}$.
Fitting into such a diagram guarantees a canonical map 
\[
\clies(\Omega \otimes \fg, \cliels(\Omega_c^* \otimes \fh)_f) \to \bZ_n({\bf f})
\]
as factorization algebras, where $\bZ({\bf f})$ is some factorization algebra modeling the centralizer~${\frak Z}_n(f)$. 
\item We then verify that this map is a quasi-isomorphism on disks, by the Francis-Lurie result mentioned above. 
\end{enumerate}
Hence it induces a weak equivalence of the associated factorization algebras and hence as $\EE_n$ algebras. 

\subsection{Consequences of the central result}

If $\rho: \fg \to \fg$ is the identity map, we get the following immediate corollary.

\begin{cor}
\label{thm: center}
The center ${\frak Z}_n(\fg)$ of the enveloping $\EE_n$ algebra $\UU_n\fg$ is the $\EE_n$ algebra $\clies(\fg, \UU_n\fg)$. 
When $k$ is $\RR$ or $\CC$, the 
center is modeled by the locally constant factorization algebra that assigns
\[
\clies(\fg \otimes \Omega^\bu(U), \cliels( \fg \otimes \Omega^\bu_c(U)))
\]
to each open set $U \subset \RR^n$.
\end{cor}

This result generalizes the fact that $\Hoch^*(U\fg,U\fg) \simeq \clies(\fg, U\fg)$, 
since the associative algebra $U\fg$ is modeled by the locally constant one-dimensional factorization algebra that assigns
$\cliels (\fg \otimes \Omega^\bu_c(U))$ to each open $U \subset \RR$. 

\greg{We could relate this to $P_n$ center of $\fg$. That shall also (but I have to think about the proof more), 
at least up to formality gives the $P_{n+1}$ structure on it. }\owen{Brian now does this in the TFT section.}

If $\epsilon: \fg \to 0$ is the trivial map, then by taking the enveloping $\EE_n$ algebras, we obtain the canonical augmentation $\epsilon: \UU_n \fg \to k$ of $\EE_n$ algebras.
In this case, we obtain a version of Koszul duality as the corollary.

\begin{cor}
\label{thm: koszul duality}
The centralizer of the augmentation $\epsilon: \UU_n \fg \to k$ is equivalent to $\clies(\fg)$ viewed as an $\EE_n$ algebra. It is modeled by the locally constant factorization algebra that assigns
\[
\clies(\fg \otimes \Omega^\bu(V))
\]
to each open set $V \subset \RR^n$.
\end{cor}

\owen{Some easy but important situations to examine:}
\begin{itemize}
\item When $n=0$, we see naive endomorphisms arise.
\item When $n=1$, we recover standard Koszul duality and Hochschild cohomology examples.
\item When $n=1$, unpack in detail how the convolution picture matches the classic view of Koszul duality for associative (co)algebras.
\item Consider $\fg$ {\em abelian} for arbitrary $n$ and compare to the $\EE_n$ HKR theorem.
\item Compare with $\EE_n$ HKR theorem for $\clies(\fg)$ via $\EE_n$ Koszul duality.
\item Use these facts to compute factorization homology of centralizers on manifolds with boundary --- kind of like Chern-Simons states!
\end{itemize}

Having an explicit presentation for the centralizer of a map of $\EE_n$ algebras leads to a calculation of factorization homology.
The enveloping $\EE_n$ algebra is the homotopy $O(n)$-fixed points, or a $\mathrm{Disk}_n$ algebra in the sense of~\cite{AF},
and hence determines a factorization algebra on any un-oriented $n$-dimensional manifold \cite{Knudsen}.
Therefore, for a closed $n$-dimensional manifold $M$, one has
\[
\int_M {\frak Z}_n(\UU_n \rho) \simeq \clies(\fg \otimes \Omega^\bu(M), \cliels( \fh \otimes \Omega^\bu(M))).
\]
Since $\Omega^\bu(S^n) \simeq \CC[\epsilon_n]$, where $\epsilon_n$ is a formal variable with $|\epsilon_n| = n$ and $\epsilon_n^2 = 0$, we have
\[
\int_{S^n} {\frak Z}_n(\UU_n \rho) \simeq \clies(\fg[\epsilon_n], \cliels( \fh[\epsilon_n]))
\]
For $n=1$, this recovers a theorem of Tamarkin and Tsygan \cite{TT} on the Hochschild cohomology of differential operators on a Lie group $G$;
see Example~\ref{eg: TT}. 

\subsection{Comments on a generalization}

\owen{If we want, we could conjecture here the general statement that we almost proved (for $f: \UU_n \fg \to B$, $\frak{Z}_n(f) \simeq \clies(\fg, B_f)$) and maybe even sketch an approach.}

\section{Background}
\label{sec: background}

In this section we review key definitions and facts from the literature on $\EE_n$ and factorization algebras.

\subsection{Recollections on $\EE_n$ algebras and prefactorization algebras}
\label{sec: en background}

We reemphasize that $\EE_n$ refers to any operad or colored operad or $\infty$-operad equivalent to the topological operad of little $n$-disks. 

Let $M$ be a manifold. 
The collection of disjoint disks in $M$ form a colored operad that we will denote by ${\rm Disk}^\sqcup_M$. 
When $M = \RR^n$ we will denote this colored operad by ${\rm Disk}^{\sqcup}_n$. 

A ${\rm Disk}^\sqcup_M$ algebra $A$ is {\em locally constant} if for any embedding of disks $D \hookrightarrow D'$ in $M$ that the induced map $A(D) \to A(D')$ is an equivalence. 
When $M = \RR^n$, it is a result of Lurie that the theory of locally constant ${\rm Disk}^\sqcup_n$ algebras is equivalent to the theory of $\EE_n$ algebras. 

\begin{thm}[\cite{LurieHA} Proposition 5.4.5.15]
\label{thm:lurie1} 
There is a fully faithful embedding of $\infty$-categories
\[
{\rm Alg}_{\EE_n} \to {\rm Alg}_{{\rm Disk}^\sqcup_n}
\]
whose essential image is the full subcategory of locally constant ${\rm Disk}^\sqcup_n$ algebras. 
\end{thm}

In the above proposition, we refer to ${\rm Disk}^\sqcup_n$ algebras in the homotopically coherent sense. 
In particular, the requisite associativity axioms hold up to a prescribed homotopy.
For algebras over a colored operad satisfying some modest axioms, one can find a ``strictification" which is equivalent to the original homotopically coherent algebra.
See Theorem 1.1 of \cite{PavlovRectify} for a general result of this type that is sufficient for our purposes. 
There is a $1$-category of ${\rm Disk}^\sqcup_n$ algebras where we require associativity to hold in the strict sense. 
By this general strictification result, given any homotopically coherent ${\rm Disk}^{\sqcup}_n$ algebra we can find an equivalent algebra which is an object in this $1$-category. 

There is another colored operad ${\rm Opens}^\sqcup_M$ whose colors consist of all connected open subsets of $M$. 
We note that ${\rm Disk}^\sqcup_M$ is a full subcategory of ${\rm Opens}^\sqcup_M$.
%The set of operations ${\rm Disj}_M \left(\{U_\alpha\} , V \right)$ consists of a single point if the collection $\{U_\alpha\}$ is pairwise disjoint and are all contained in $V$.
%Otherwise the set is empty. 
A {\em prefactorization algebra} on $M$ is an algebra over the colored operad ${\rm Opens}^{\sqcup}_M$. 
We say a prefactorization algebra on $M$ is locally constant if its associated ${\rm Disk}_n$ algebra is.

Again, the $\infty$-category of prefactorization algebras consists of objects where associativity only holds up to homotopy. 
We can equally apply strictification for prefactorization algebras: given a homotopy coherent prefactorization algebra, we can find an equivalent object in the $1$-category of strict prefactorization algebras. 

A prefactorization algebra is a {\em factorization} algebra if it satisfies a certain codescent condition, see Section 5.5.4 of \cite{LurieHA} or Chapter 6 \cite{CG1}. 
Locally constant factorization algebras provide another model for $\EE_n$ algebras: there is an equivalence of $\infty$-categories between locally constant factorization algebras on $\RR^n$ and $\EE_n$ algebras. 

Throughout the text, we will refer to particular strict factorization (or strict ${\rm Disk}^\sqcup_M$) algebras using bold fonts, e.g. $\bU, \bZ$, etc.. 
The homotopy coherent $\EE_n$ algebras will be denoted by blackboard font, e.g. $\UU$, except for the centralizer of a map where we will use the symbol $\fZ(f)$. 
 
\subsection{Enveloping $\EE_n$ algebras of Lie algebras}
\label{sec: enveloping}

Although \cite{Knudsen} develops an adjunction between Lie and augmented $\EE_n$ algebras
in any presentable symmetric monoidal stable $\infty$-category $\cC$,
we only work in the $\infty$-category of cochain complexes $(\Ch_k, \otimes_k)$, 
where $k$ is a field of characteristic zero.
We summarize Knudsen's result in this setting as follows.

\begin{thm}\label{T:UnofLie}
There is an adjunction of $\infty$-categories
\[
\begin{tikzcd}
\Alg_\Lie(\Ch_k) \arrow[r, bend left=20, shift left=.5ex,"\UU_n"]  & \Alg_{\EE_n}(\Ch_k) \arrow[l, shift left=.5ex, "\oblv_n"]
\end{tikzcd}
\]
where $\oblv_n$ denotes a ``forgetful'' functor from $\EE_n$ algebras to Lie algebras.

Both $\infty$-categories admit canonical forgetful functors to $\Ch_k$ and we denote both functors by $\oblv$;
these functors have left adjoints $\Free_\Lie$ and $\Free_{\EE_n}$, respectively.
There is a natural equivalence
\[
\UU_n (\Free_\Lie V) \simeq \Free_{\EE_n}(V[1-n])
\]
for every cochain complex~$V$.

When $k$ is $\RR$ or $\CC$, 
the enveloping $\EE_n$ algebra $\UU_n \fg$ of a dg Lie algebra $\fg$ is modeled by the locally constant factorization algebra $\bU_n \fg$ that assigns
\[
\bU_n \fg(V) = \cliels(\Omega^\bu_c(V) \otimes \fg)
\]
to each open set $V \subset \RR^n$.
\end{thm}

The final part of this result leads to the explicit models in our theorems.

\begin{rmk}
An appealing aspect of this result is that it makes manifest why such enveloping $\EE_n$ algebras determine factorization algebras on all $n$-dimensional manifolds, whether framed or oriented or unoriented.
The key point is that the model uses the compactly supported de Rham complex (or some other model of chains)
and hence makes sense on general manifolds.
\end{rmk}

In fact, Knudsen shows a stronger version of the second part.
if one restricts to working with open balls in $\RR^n$ (rather than arbitrary open sets)
then there is a $\Disk_n$ algebra ${\tt U}_n \fg$ assigning $\cliels(\fg[-n]) = \Sym(\fg[1-n])$ to each ball and it is manifestly locally constant.
This $\Disk_n$ algebra ${\tt U}_n \fg$ is another model for~$\UU_n \fg$.

\begin{rmk}
It follows from theorem~\ref{T:UnofLie} that for any $\EE_n$ algebra $B$, 
its underlying complex is equipped with a homotopy-coherent Lie algebra structure.
Depending on one's preferences, one can work with an an $L_\infty$ algebra structure or strictify to a dg Lie algebra structure (at the cost of replacing the complex with something quasi-isomorphic but typically much larger).
\end{rmk}

\subsection{Centralizers of maps of $\EE_n$ algebras and the derived center}
\label{sec: centralizer}

We briefly review some of the main notions and refer the reader to \cite{LurieHA} Section 5.3 and \cite{FrancisHH} for detailed discussions. Let $\cC^\otimes$ denote a presentable stable symmetric monoidal $\infty$-category (for us, chain complexes over a field $k$ of characteristic zero with~$\otimes_k$).

\begin{dfn}\label{D:centralizer}
For a map $f: A \to B$ of $\EE_n$ algebras in $\cC$, 
the {\em centralizer} ${\frak Z}_n(f)$ is the $\EE_n$ algebra in $\cC$ that is universal among those that fit in a commuting diagram
\[
\begin{tikzcd}
& {\frak Z}_n(f) \otimes A \arrow[dr] & \\
A \arrow[ur, "u \otimes \id"] \arrow[rr, "f"] && B
\end{tikzcd}
\]
where the arrow in the upper left is the tensor product of the unit map $u: 1_\cC \to {\frak Z}_n(f)$ and the identity map $\id: A \to A$.
The {\em center} of an $\EE_n$ algebra $A$ is the centralizer of its identity morphism $\id_A: A \to A$. 
We  denote it ${\frak Z}_n(A) := {\frak Z}_n(\id_A)$.
\end{dfn}

When $n=1$ and $\cC$ is the category of vector spaces, 
the centralizer of $f: A \to B$ consists of elements in $B$ that commute with the image $f(A)$ inside~$B$. 
In particular, taking $f$ as the identity map, 
the center of $A$ defined above agrees with the traditional notion. 
See Theorem 5.3.1.30 of~\cite{LurieHA}, or Proposition 6.22 in~\cite{GTZ3}, for an alternative characterization.

\begin{prp}
\label{T:centralizer=inthom} 
The centralizer ${\frak Z}_n(f)$ exists and can be identified with the classifying object for maps from $A$ to $B$ in the $\infty$-category $\Mod^{\EE_n}_A(\cC)$. \mahmoud{we should probably spell out the meaning of the classifying object in this case to make it obvious that the centralizer is the classifying object}
\end{prp} 

When $n=1$ and $\cC$ is chain complexes over the field $k$, then $\Mod^{E_1}_A(\cC)$ is equivalent to $A\otimes A^{op}$-modules and hence ${\frak Z}_{E_1}(f) \simeq {\rm Hoch}^*(A,B_f)$,
where $B_f$ denotes $B$ viewed as an $A\otimes A^{op}$-modules via the map~$f$.

We record a key fact drawn from \cite{LurieHA},~\cite{FrancisHH}  and \cite{GG-Notes}, which generalizes this situation.

\begin{prp}
\label{P:ModentoModSn}
Let $\cC^\otimes$ be a presentable symmetric monoidal stable $\infty$-category whose tensor product preserves colimits in each variable separately.
For $A$ be an $\EE_n$ algebra in $\cC$,
the $\infty$-category $\Mod^{\EE_n}_A(\cC)$ is equivalent to the $\infty$-category $\LMod_{{\int_{S^{n-1}} A}}(\cC)$.
\end{prp}

See Remark 7.3.5.3 of \cite{LurieHA}, Corollary 13 in~\cite{GG-Notes} and Section 2 of \cite{FrancisHH}.
Concretely, this claim arises from the fact that as a module over $A$ as an $\EE_n$ algebra, 
$M \in \Mod^{\EE_n}_A(\cC)$ is equipped with a commuting family of actions by $A$ parametrized by $\RR^n \setminus \{0\}\cong S^{n-1} \times \RR_{>0}$.
This action factors through the left action of the $E_1$ algebra $\int_{S^{n-1} \times \RR_{>0}} A$ arising from factorization homology over the complement of the origin,
which integrates all those actions and through which they all factor. 
As shown in Theorem 7.5.3.1 of \cite{LurieHA} and earlier in Proposition 3.16 of \cite{FrancisHH}, 
this algebra $\int_{S^{n-1} \times \RR} A$ is equivalent to ${\rm Free}(1_\cC)$, 
the image of the unit object $1_\cC \in \cC$ under the left adjoint ${\rm Free}$ to the forgetful functor $\Mod^{\EE_n}_A(\cC) \to \cC$.

We now turn to proving Theorem~\ref{thm: centralizer}.

\section{Proof of Theorem \ref{thm: centralizer}}

Recall the overall strategy.
First, we define a factorization algebra $\clies(\Omega^\bu \otimes \fg, (\bU_n \fh)_f)$ as a kind of convolution factorization algebra.
Then we get to the heart of the construction:
we show that this convolution algebra naturally sits inside a centralizer diagram.
By the universal property of the centralizer, we then obtain 
a canonical map 
\[
\theta_{{\bf f}}: \clies\big(\fg\otimes \Omega , B \big) \longrightarrow  \bZ(\mathbf{f})
\]
where $\bZ_n(\mathbf{f})$ is some locally constant factorization algebra that models the centralizer ${\frak Z}_n(f)$ of the map~$f$.
It is then a direct computation to verify $\theta_f$ is a quasi-isomorphism,
using the Francis-Lurie result mentioned earlier.

\owen{Comment on notations:}
As we work in the setting of factorization algebras on $\RR^n$, 
we will use bold font to indicate such factorization models for $\EE_n$ algebra statements.
For instance, we use $\bU_n \fg$ for the factorization model of the enveloping $\EE_n$ algebra,
and we use ${\bf f}: \bU_n \fg \to \bU_n \fh$ for the factorization model of the map $f: \UU_n \fg \to \UU_n \fh$ of $\EE_n$ algebras.

\subsection{Standard manipulations with $L_\infty$ algebras and their modules}
\label{sec: review of linfty}

We assume the reader is familiar with Lie algebras and $L_\infty$ algebras and with standard constructions,
such as the Chevalley-Eilenberg chains or cochains, which we may also call the Lie algebra (co)chains.
A nice reference is \cite{LodayVallette}.
Nonetheless, we review a few aspects that play a crucial role below.

First, recall that an $L_\infty$ algebra $\fg$, with its collection of brackets $\{\ell_n\}_{n \geq 1}$ is fully encoded by its dg conilpotent cocommutative coalgebra
\[
\cliels(\fg) = \bigg(\Sym(\fg[1]) \; , \; \d = \sum_{n \geq 1} \ell_n\bigg)
\]
where the sum of the brackets provides a square-zero coderivation.
The square-zero condition efficiently encodes the higher Jacobi relations.
We call $\cliels(\fg)$ the {\em Lie algebra chains} (or Chevalley-Eilenberg chains) of~$\fg$.

This coalgebra is canonically coaugmented by the inclusion of the base field $k \xto{\simeq} \Sym^0(\fg[1])$.
There is thus a subcoalgebra $\overline{\cliels(\fg)} \subset \cliels(\fg)$ given by the direct sum over positive symmetric powers of $\fg[1]$,
which can be identified with both the kernel of the counit map as well as cokernel of the coaugmentation map.
In short,
\[
\cliels(\fg) = k \oplus \overline{\cliels(\fg)}
\]
as cochain complexes.

This construction is symmetric monoidal.
The {\em product} of two $L_\infty$ algebras $\fg \times \fh$ is the direct sum of the underlying graded vector spaces $\fg \oplus \fh$ equipped with the brackets encoded by the tensor product of their chains
\[
\cliels(\fg_1 \times \fg_2) = \cliels(\fg_1) \otimes \cliels(\fg_2),
\]
which piggybacks on the fact that $\Sym$ is a symmetric monoidal functor.

By definition, an $L_\infty$ map $f: \fg \rightsquigarrow \fh$ is a (strict) map of such dg cocommutative coalgebras
\[
f: \cliels(\fg) \to \cliels(\fh).
\]
The requirement that $f$ preserves all that structure encodes efficiently that the brackets intertwine in the correct fashion.
It is then immediate that the hom-complex
\[
\Hom^\bullet (\cliels(\fg), \cliels(\fh))
\]
admits a deformed differential
\[
\d_\Hom + [f,-]
\]
known as a twisting cocycle.
We use 
\[
\clies(\fg,\cliels(\fh)_f)
\]
to denote this cochain complex whose differential depends on the choice of $L_\infty$ map~$f$,
and we call it the {\em Lie algebra cochains of $\fg$ with values in $\fh$ arising from the map~$f$}.

This complex $\clies(\fg,\cliels(\fh)_f)$ encodes the deformation theory for $L_\infty$ maps around the map~$f$.
In concrete terms, the Hom-complex $\Hom^\bullet (\cliels(\fg), \cliels(\fh))$ describes the ``linear space'' of linear maps between those complexes.
Hence, if we pick a particular map, such as $f$, the underlying graded space of its ``tangent space''
\[
T_f \Hom^\bullet (\cliels(\fg), \cliels(\fh))
\]
is naturally isomorphic to the ambient linear space,
but the basepoint $f$ of this tangent space is remembered in the twisted differential $\d_\Hom + [f,-]$.
In a sufficiently sophisticated geometric setting, there is a moduli space of $L_\infty$ maps from $\fg$ to~$\fh$,
and $\clies(\fg,\cliels(\fh)_f)$ is this tangent complex with basepoint~$f$.

Due to the splitting $\cliels(\fg) = k \oplus \overline{\cliels(\fg)}$,
we have a decomposition
\begin{align*}
\clies(\fg,\cliels(\fh)_f) 
&\cong \cliels(\fh) \oplus \Hom^\bullet(\overline{\cliels(\fg)}, \cliels(\fh)_f)\\
&\cong k \oplus \overline{\cliels(\fh)} \oplus \Hom^\bullet(\overline{\cliels(\fg)}, \cliels(\fh)_f)
\end{align*}
which plays a crucial role in our argument.

Indeed, consider the canonical evaluation pairing
\[
\ev_{f}: \clies(\fg,\cliels(\fh)_f) \otimes \cliels(\fg) \to \cliels(\fh)
\]
sending $(1 + g, x)$ to $f(x) + g(x)$, where $g \in \Hom^\bullet(\overline{\cliels(\fg)}, \cliels(\fh)_f)$.
In this sense, we see how $\clies(\fg,\cliels(\fh)_f)$ encodes deformations of~$f$.

\owen{Probably need to mention somewhere that it's better to work with $\clies(\fg)$ as a completed object.}
\brian{I think you've got around this issue by talking about Homs}

\subsection{Defining the convolution factorization algebra}
\label{sec: dfn of centralizer fact alg}

Our goal here is to construct the factorization algebra that models the centralizer.
First, we need to show that there is a well-defined functor (in the 1-categorical sense) ${\rm Opens}_{\RR^n} \to \Ch_k$ assigning $\clies(\Omega^\bu(V) \otimes \fg, \bU_n \fh(V))$ to each open set $V$.
Once that is in place, it is straightforward to describe the structure maps of the prefactorization algebra and to verify it forms a factorization algebra.

\begin{rmk}
These arguments are now standard in the literature of factorization algebras, so we will be brief in our discussion.
See, e.g., \cite{CG1} \owen{stuff by Greg and others} for more.
\end{rmk}

Consider now a fixed open set $V \subset \RR^n$.
Then the $L_\infty$ map $f: \fg \rightsquigarrow \fh$ induces canonically an $L_\infty$ map 
\[
\tilde{f}: \Omega^\bu_c(V) \otimes \fg \rightsquigarrow \Omega^\bu_c(V) \otimes \fh
\]
by base change along the map $k \to \Omega^\bu_c(V)$ of dg commutative algebras,
as the compactly supported de Rham forms form a dg commutative algebra under wedge product.
In consequence, we see that $\Omega^\bu_c(V) \otimes \fg$ acts on $\Omega^\bu_c(V) \otimes \fh$ and hence equips it with the structure of an $L_\infty$ module over $\Omega^\bu_c(V) \otimes \fg$.
We denote this module as
\[
(\Omega^\bu_c(V) \otimes \fh)_f
\]
to emphasize the dependence on the original map~$f$.
In this action, the wedge product of forms intertwines with the $L_\infty$ structure on $\fg$ in a very simple way: 
they simply happen side by side, but do not affect each other.

Observe that $\Omega^\bu_c(V)$ is a module over the dg commutative algebra $\Omega^\bu(V)$ of {\em non}\/compactly supported forms.
This action extends immediately to the module $(\Omega^\bu_c(V) \otimes \fh)_f$, 
so we now view it as an $L_\infty$ module over $\Omega^\bu(V) \otimes \fg$ as well.
We now need to explain how to make $\cliels(\Omega^\bu_c(V) \otimes \fh)$ into an $L_\infty$-module over $\Omega^\bu(V) \otimes \fg$.
Here we rely on the fact that modules over an $L_\infty$ algebra are symmetric monoidal over $\otimes_k$, 
so that we can construct new modules from a given module by taking symmetric powers.
Since
\[
\cliels(\Omega^\bu_c(V) \otimes \fh) = \bigoplus_{n \geq 0} \Sym^n(\Omega^\bu_c(V) \otimes \fh[1])
\]
as cochain complexes,
we see that $\cliels(\Omega^\bu_c(V) \otimes \fh)$ acquires a canonical action of $\Omega^\bu(V) \otimes \fg$.
In consequence, we have a cochain complex
\[
\clies(\Omega^\bu(V) \otimes \fg, \cliels(\Omega^\bu_c(V) \otimes \fh)_f)
\]
on each open set~$V$.

The next step is to verify functoriality of this construction over the poset of opens.
This property follows quickly from the fact that wedge product of forms preserves support.
Given an inclusion $i: V' \subset V$ of opens, if we take a form $\alpha \in \Omega^\bu(V)$ and a compactly supported form $\beta \in \Omega^\bu_c(V')$, then the wedge product $\alpha \wedge i_* \beta \in \Omega^\bu_c(V)$ after applying the extension-by-zero map $i_*: \Omega^\bu_c(V') \to \Omega^\bu_c(V)$ equals the wedge product $i_*(i^*\alpha \wedge \beta)$ arising from the restriction $i^* \alpha$ of $\alpha$ to~$V'$.
In consequence, the action of $\Omega^\bu(V) \otimes \fg$ on $\cliels(\Omega^\bu_c(V') \otimes \fh)_f$ arising from the restriction map $\Omega^\bu(V) \otimes \fg \to \Omega^\bu(V') \otimes \fg$ of $L_\infty$ algebras agrees with action induced by the inclusion of $\cliels(\Omega^\bu_c(V') \otimes \fh)_f$ as a (strict) submodule of~$\cliels(\Omega^\bu_c(V) \otimes \fh)_f$.
This argument is manifestly associative under composition of inclusions, so we have shown our first claim.

\begin{lmm}
The assignment
\[
V \mapsto \clies(\Omega^\bu(V) \otimes \fg, \cliels(\Omega^\bu_c(V) \otimes \fh)_f)
\]
determines a functor from ${\rm Opens}_{\RR^n}$ to~$\Ch_k$.
\end{lmm}

We now turn to extending this functor to an algebra over the colored operad ${\rm Opens}_{\RR^n}^\sqcup$ whose colors are opens in $\RR^n$ where there is a precisely a single operation from a tuple of opens $[V_1,\ldots,V_k]$ to an open $W$ if and only if both $W$ contains every $V_j$ and the $V_j$ are all pairwise disjoint.

The key fact is that the functors $\cliels$ and $\clies$ are suitably symmetric monoidal:
they send a product of $L_\infty$ algebras to a tensor product of cochain complexes.
Hence it suffices to examine the underlying functors to $L_\infty$ algebras.
As the functors $\Omega^\bu$ and $\Omega^\bu_c$ send finite disjoint unions of opens to the direct product of cochain complexes, 
the functors like $\Omega^\bu \otimes \fg$ and $\Omega^\bu_c \otimes \fh$ send finite disjoint unions of opens to products of $L_\infty$ algebras.
In consequence, we obtain the desired second claim.

\begin{lmm}
The assignment
\[
V \mapsto \clies(\Omega^\bu(V) \otimes \fg, \cliels(\Omega^\bu_c(V) \otimes \fh)_f)
\]
determines a prefactorization algebra, i.e., a strict algebra over ${\rm Opens}_{\RR^n}^\sqcup$ with values in~$\Ch_k^\otimes$.
\end{lmm}

Due to the Poincar\'e lemma, the inclusion of a disk into a bigger disk $D \hookrightarrow D'$ makes the structure map 
\[
\clies(\Omega^\bu(D) \otimes \fg, \cliels(\Omega^\bu_c(D) \otimes \fh)_f) \xto{\simeq} \clies(\Omega^\bu(D) \otimes \fg, \cliels(\Omega^\bu_c(D) \otimes \fh)_f)
\]
a quasi-isomorphism.
Hence this prefactorization algebra is locally constant in a homotopical sense.

In fact, it defines a {\em factorization} algebra, by arguments that can be found in \owen{chapter 6 of \cite{CG1} and elsewhere}.

\begin{dfn}
\label{dfn: centralizer for f}
Let $\clies(\Omega^\bu \otimes \fg, (\bU_n \fh)_f)$ denote this factorization algebra on $\RR^n$ arising from the map $f: \fg \rightsquigarrow \fh$.
\end{dfn}

\begin{rmk}
For those coming from an operadic background, it may be helpful to recognize that our approach is a variant of a familiar convolution construction.
The functor $\bU_n \fh = \cliels(\Omega^\bu_c \otimes \fh)$ determines an algebra over the colored operad ${\rm Opens}_{\RR^n}^\sqcup$,
while the functor $\cliels(\Omega^\bu \otimes \fg)$ determines a {\em co}\/algebra over the colored operad ${\rm Opens}_{\RR^n}^\sqcup$.
The algebra $\clies(\Omega^\bu \otimes \fg, (\bU_n \fh)_f)$ assigns the graded vector space
\[
\Hom^\bullet(\cliels(\Omega^\bu(V) \otimes \fg), \cliels(\Omega^\bu_c(V) \otimes \fh))
\] 
to each open set $V$,
twining together this coalgebra and algebra.
\owen{This has a name, but I'm blanking at the moment.}
\brian{convolution?}
The differential can be seen as a twisting cocycle arising from a choice of map $f$;
there is a natural basepoint to the space of differentials on this graded vector space by taking the usual differential of a hom-complex.
\end{rmk}

%
%\def\conv{{\rm Conv}}
%
%\owen{For an ordinary colored operad $\cO$, describe how to produce a $\cO$-algebra $\conv(C,A)$ from any $\cO$-coalgebra $C$ and $\cO$-algebra $A$.}
%
%\owen{A special case to consider is how a cocycle $f \in \conv(C,A)$ encodes an $\cO$-algebra morphism $C^! \to A$ from $C^! = \conv(C,1)$, the ``Koszul dual'' $\cO$-algebra to the coalgebra $C$. This cocycle can be used to twist the differential of $\conv(C,A)$. Hopefully this admits an obvious deformation-theoretic interpretation.}
%
%\owen{If we do this correctly, we might find a model category-theoretic picture of how Koszul duality works for prefactorization algebras.}

\subsection{Construction of the universal pairing in factorization algebras}
\label{SS:constuctionthetaf}

Our goal in this subsection is to construct a map of factorization algebras
\[
\ev_{{\bf f}}: \clies(\Omega^\bu \otimes \fg, (\Omega^\bu_c \otimes \fh)_f) \otimes \bU_n \fg \to \bU_n \fh,
\]
while in the next subsection we will show it fits into a centralizer diagram.
To produce our map, we first construct it separately on each open subset and then explain why the construction is functorial. 

Let $V \subset \RR^n$ be open.
The canonical pairing between Lie algebra chains and cochains provides a canonical cochain map
\[
\clies(\Omega^\bu(V) \otimes \fg, \cliels(\Omega^\bu_c(V) \otimes \fh)_f) \otimes \cliels(\Omega^\bu(V) \otimes \fg) \to \cliels(\Omega^\bu_c(V) \otimes \fh)_f.
\]
The canonical inclusion $\Omega^\bu_c(V) \otimes \fg \hookrightarrow \Omega^\bu(V) \otimes \fg$ induces a canonical inclusion 
\[
\cliels(\Omega^\bu_c(V) \otimes \fg) \hookrightarrow \cliels(\Omega^\bu(V) \otimes \fg)
\]
and hence, precomposing this inclusion with the pairing, we obtain our desired map
\[
\ev_{{\bf f}}(V): \clies(\Omega^\bu(V) \otimes \fg, \cliels(\Omega^\bu_c(V) \otimes \fh)_f) \otimes \bU_n \fg(V) \to \bU_n \fh(V)
\]
for each open~$V$.

This construction is functorial in $V$ because wedge product of differential forms preserves support,
so a minor variation on our argument above implies the following.

\begin{lmm}
The assignment
\[
V \mapsto \ev_{{\bf f}}(V)
\]
determines a natural transformation between functors from ${\rm Opens}_{\RR^n}$ to~$\Ch_k$.
\end{lmm}

\owen{Commented out below is an extensive argument by Greg about the existence and behavior of $\Theta_f$. If my explanation above is missing something crucial, I suspect it's addressed in that argument.}

%\greg{
%We start by defining a pairing between the factorization algebras of Chevalley-Eilenberg (co)chains in order to use the universal property of centralizers.\\
%First note that compactly supported form embeds in all forms, therefore we can apply 
%any element of $\cliels\big(\fg \otimes \Omega^\bu , B\big)$ 
%to any element of $\cliels\big(\fg \otimes \Omega_c^* \big)$. Therefore, for any  $p\in \bN$, we have an evaluation 
%\begin{equation} \label{eqdef:ev} \begin{array}{c}\ev: Sym^p \big( \fg \otimes \Omega^\bu (U)[-1] ,B(U)\big)
%\otimes  Sym^p( \fg\otimes \Omega^\bu_c(U) [1]) \stackrel{ev}\longrightarrow B(U)  
%  \\
% (x,\Phi) \,\longmapsto\, (-1)^{p(|x|+p) } \Phi (x)\end{array}
%\end{equation} induced by this embedding  in all forms followed by evaluating on a function.\\
%Second, the augmentation of $B$ makes $B$ augmented as well (in the obvious sense of~\cite{Gi-NotesFactorization}) and this induces an augmentation on
%$\clies\big(\fg\otimes \Omega , B \big)$ as well as follows. 
%We have the canonical factorization algebra map  $\mathbf{1}$  defined, for any open $U$, by 
%\[\xymatrix{ k(U)=k  \ar[r]^{\quad \cong}& 
%B(\emptyset) \ar[r] & B(U)  } 
% \] where the last map is given by the factorization algebra structure of $B$. This gives the canonical element element 
% $\mathbf{1}\in \clies(\fg\otimes \Omega^\bu, B) )$ which is the unit $k\to \clies(\fg\otimes \Omega^\bu, B) )$
% of the factorization structure of 
% the Chevalley-Eilenberg cochain factorization algebras~\ref{dfn:CEofFact}.  
% The augmentation map is given by $\varphi\mapsto \varepsilon \circ \varphi \circ 
% \iota$ where $\iota: k(U) \cong k \hookrightarrow Sym(\fg \otimes \Omega (U) [1]) $ is the inclusion and $\varepsilon B(U)\to k(U)$ is the augmentation of 
% $B$. We therefore obtain a canonical splitting of factorization algebras 
% \begin{equation}\label{eq:splittingbyaugm}
%   \clies\big(\fg\otimes \Omega^\bu, B\big)  \, \cong \, k \oplus \overline{ \clies(\fg\otimes \Omega^\bu, B) )}
% \end{equation}
%given by the augmentation. Below~\ref{Rmk:defgraduationclie}, we refine  this splitting, using it  freely  on each-connected component, to obtain 
%a natural grading on it.\\
%We use the splitting and~\eqref{eqdef:ev} to define our pairing as follows. First for a \emph{connected} open subset $W$ of $\RR^n$, we define 
%\begin{multline}\label{eq:defevforconnected}
% \ev_f^W:   \clies (\fg\otimes \Omega (W), B(W)) \otimes \cliels\big(\fg \otimes \Omega_c^* (W)) 
% \\ \cong \, \left( k(W) \oplus \overline{\clies (\fg\otimes \Omega (W), B(W))  }\right) 
% \otimes \cliels\big(\fg \otimes \Omega_c^* (W))  \\ \cong
% \cliels\big(\fg \otimes \Omega_c^* (W))  \oplus  \left(\overline{\clies (\fg\otimes \Omega (W), B(W))  }\otimes \cliels\big(\fg \otimes \Omega_c^* (W)) 
% \right) \\
% \stackrel{ \mathbf{f}\oplus \ev}\longrightarrow  
% B(W)
%\end{multline}
%where $\mathbf{f}$ is the factorization algebra morphism  we are given.
%In other words, if $\varphi = \lambda \mathbf{1} \oplus \overline{\varphi}$ is the decomposition of $\varphi \in  \clies (\fg\otimes \Omega (W), B(W)) $,
%we have 
%\[ \ev_f^W(\varphi\otimes x)= \lambda \mathbf{f}(W)(x) + \overline{\varphi}(x). \]
%We extend this construction  to any 
% open subset in $\RR^n$ using the \lq\lq{}Leibniz rule\rq\rq{}, that is on using it freely on every connected components. 
% More precisely, 
%  write $U=\coprod_{i\in I} U_i$ the decomposition of an open into the  disjoint union 
%of its connected components. Using, the natural isomorphisms of complexes 
%\[Sym\big(\fg \otimes \Omega (U)[-1]\big) 
%\cong \bigotimes\limits_{i\in I} Sym\big(\fg \otimes \Omega ( U_i)[-1]\big), \mbox{  } 
%\bigotimes_{i\in I} \cliels\big(\fg \otimes \Omega_c^* (U_i)\big) \cong
%\cliels\big(\fg \otimes \Omega_c^* (U)\big)\] and
%$\bigotimes_{i\in I} B(U_i) 
%\stackrel{\simeq}\longrightarrow B(U)$, we obtain the 
% (natural) decomposition 
%\begin{multline}\label{eq:defgraduationoncentralizernonconnected}
% \clies\big(\fg\otimes \Omega^\bu(U), B(U)\big)  \, \cong \, 
% \Hom\left(\bigotimes\limits_{i\in I} Sym\Big(\fg\otimes \Omega (U_i)[-1]), 
% \bigotimes\limits_{i\in I} B(U_i)\right) \\ \cong \, 
% \bigotimes\limits_{i\in I}\left( k(U_i) \oplus \overline{\clies (\fg\otimes \Omega (U_i), B(U_i))  }\right).
%\end{multline}
%and we can therefore define 
%\begin{multline}\label{eq:defineevf}
% \ev_f^U: \clies (\fg\otimes \Omega (U), B(U)) \otimes \cliels\big(\fg \otimes \Omega_c^* (U)) 
% \\ \stackrel{\simeq}\longrightarrow  
%\bigotimes\limits_{i\in I}\left( k(U_i) \oplus \overline{\clies (\fg\otimes \Omega (U_i), B(U_i))  }\right) \otimes 
% \left(\bigotimes\limits_{i\in I}\cliels\big(\fg \otimes \Omega_c^* (U_i)\big)\right)  \\ 
% \stackrel{\bigotimes\limits_{i\in I}\ev^{U_i}_f}\longrightarrow  
% \bigotimes\limits_{i\in I} B(U_i) \stackrel{\mu_B}\longrightarrow B(U)
%\end{multline}
%where $\mu_B$ is the canonical structure map of the factorization algebra $B$ and the other maps are given by~\eqref{eq:defgraduationoncentralizernonconnected} 
%and~\eqref{eq:defevforconnected}.
%\greg{In~\eqref{eq:defgraduationoncentralizernonconnected} and definition of Chevalley Eilneberg complexes, one shall explain/takes care of the appropriate 
%things to do (like completion) for non-finitely dimensional Lie algebras}
%\greg{The decomposition used to extend $\ev$ on non-connected open can be done with any augmented $B$, simply by defining it onto the prefact alg obtained by tensoring 
%out on non-connected components and using the quasi-isomorphism canonical map to $\clies(\fg, B)$ in that case. Not sure which way is easier to define/mention}\\
%\begin{rmk}\label{Rmk:defgraduationclie} The decomposition~\eqref{eq:defgraduationoncentralizernonconnected} makes 
%the Chevalley-Eilenberg cochain complex with value on an open $U$ naturally\footnote{The grading
%is compatible (by the same argument as Lemma~\ref{L:pairingCE}) with the factorization algebra structure maps of
%$\clies(\fg\otimes \Omega, B)$} graded by the subsets of its connected components:
% \begin{equation}\label{eq:defgraduationoncentralizernonconnected2}
% \clies\big(\fg\otimes \Omega^\bu(U), B(U)\big)  \, \cong \, \bigoplus\limits_{J\subset I} {\clies}^{(J)}\big(\fg\otimes \Omega^\bu(U), B(U)\big) 
%\end{equation}
%where $J$ runs through all the (possibly empty) subsets of $I$.  Precisely, the $J$-piece is
%\begin{multline*}
%{\clies}^{(J)}\big(\fg\otimes \Omega^\bu(U), B(U)\big) = 
%\left(\bigotimes\limits_{j\in I\setminus J} k(U_j)\right) \otimes \left(\bigotimes\limits_{j\in J}
%\overline{\clies (\fg\otimes \Omega (U_j), B(U_j))  }\right) \\ \cong 
%\overline{\clies (\fg\otimes \Omega (\coprod\limits_{j\in_J}U_j), B(\coprod\limits_{j\in_J}U_j))  }.
%\end{multline*}
%We think of an element of ${\clies}^{(J)}\big(\fg\otimes \Omega^\bu(U), B(U)\big)$ has an element of ${\clies}\big(\fg\otimes \Omega^\bu(U), B(U)\big)$
%\emph{with support $\coprod\limits_{j\in J} U_j$}.   
%Note that the component $k$ in the decomposition~\eqref{eq:splittingbyaugm} is precisely the component 
%${\clies}^{(\emptyset)}\big(\fg\otimes \Omega^\bu(U), B(U)\big)$ corresponding to the empty family.
%\end{rmk}
%In other words, if $\varphi = \sum_{J\subset I} \varphi^{(J)}$ is the decomposition of $\varphi$ in its graded pieces, for all 
%$X= \bigotimes\limits_{i\in I} X_i \in \bigotimes\limits_{I}\cliels(\fg\otimes \Omega_c^*(U_i)) \cong \cliels(\fg\otimes \Omega^\bu_c(U))$, we 
%have the following formula generalizing the one for connected open  subsets:
%\begin{equation} \ev_f^U(\varphi\otimes X)= \sum_{J\subset I} \mu_B\left(\mathbf{f}\Big(\bigotimes\limits_{i\in I\setminus J} 
%X_i\Big)\otimes  \varphi^{(J)}\Big(\bigotimes\limits_{j\in J} 
%X_j\Big)\right) \end{equation}
%where $\mu_{B,J}: B\Big(\coprod\limits_{i\in I\setminus J}U_i\Big)\otimes B\Big(\coprod\limits_{j\in J}U_j\Big) \to B(U)$
%is the  structure map of $B$.
%}

We need to show that this natural transformation extends to a morphism of prefactorization algebras,
i.e., that it intertwines with the operations over the colored operad ${\rm Opens}_{\RR^n}^\sqcup$.
Here we use the fact that the evaluation pairing between Lie algebra chains and cochains plays nicely with products of $L_\infty$ algebras, in the following sense.
Let $\fX, \fY$ be $L_\infty$ algebras and let $M, N$ be modules for those respective $L_\infty$ algebras.
The direct sum $M \oplus N$ admits a natural action of the product $L_\infty$ algebra $\fX \times \fY$.
Then the isomorphisms
\begin{align*}
\clies(\fX \times \fY, M \oplus N) \otimes \cliels(\fX \times \fY) 
&\cong (\clies(\fX, M) \otimes \clies(\fY,N) ) \otimes (\cliels(\fX) \otimes \cliels(\fY) ) \\
&\cong (\clies(\fX,M) \otimes \cliels(\fX) ) \otimes (\cliels(\fY,N) \otimes \cliels(\fY) )
\end{align*}
precompose with the tensored evaluation pairings
\[
\cong (\clies(\fX,M) \otimes \cliels(\fX) ) \otimes (\cliels(\fY,N) \otimes \cliels(\fY) ) \xto{\ev_\fX \otimes \ev_\fY} M \otimes N
\]
to provide a canonical map
\[
\clies(\fX \times \fY, M \oplus N) \otimes \cliels(\fX \times \fY) \to M \otimes N.
\]
In light of this observation and the fact that functors such as $\Omega^\bu \otimes \fg$ and $\Omega^\bu_c \otimes \fh$ send disjoint unions to products of $L_\infty$ algebras,
we deduce the desired result.

\begin{lmm}
\label{L:pairingCE}
The natural transformation $\ev_{{\bf f}}$ determines a map of strict prefactorization algebras,
i.e., algebras over the colored operad ${\rm Opens}_{\RR^n}^\sqcup$.
\end{lmm}

\subsection{The pairing fits into a centralizer diagram}

For any factorization algebra $B$ on $\RR^n$, 
there is a unit map of factorization algebras  
\[
1(U) = k \cong 1(\emptyset)  \xto{\cong}
B(\emptyset) \to B(V)  
\] 
for each open set $V$, where the last map is structure map of~$B$. 

\begin{lmm}\label{L:ComTriangCent} 
There is a commutative triangle 
\[
\xymatrix{
& \clies ( \Omega \otimes \fg , (\bU_n \fh)_f) \otimes \bU_n \fg
\ar[dr]^{\ev_{{\bf f}}} & \\
\bU_n \fg \ar[ur]^{\mathbf{1} \otimes \id} \ar[rr]^{\mathbf{f}}  & &  \bU_n \fh}
\]
of maps of factorization algebras.
\end{lmm}

\begin{proof}
This triangle commutes on the nose, as we now show.
As a convenience, we will talk about elements, but these are only available if one evaluates a factorization algebra on an open set.
The argument below can be expanded by verifying it holds on an arbitrary open and then by checking that it is functorial in structure maps (which is quickly confirmed).

The map $\mathbf{1} \otimes \id$ sends an element $x$ of $\bU_n \fg$ to $1 \otimes x$,
where $1 \in \clies ( \Omega \otimes \fg , (\bU_n \fh)_f)$ denotes the tensor product of the distinguished element spanning $\Sym^0$ in each tensor factor.
(Remember that both $\clies(\Omega \otimes \fg)$ and $\cliels(\Omega_c \otimes \fh)$ have canonical retracts to the base field $k$.)
Hence we need to show that
\[
\ev_{{\bf f}}(1 \otimes x) = {\bf f}(x).
\]
Here we recall that the evaluation pairing between Lie algebra chains and cochains that arises from an $L_\infty$ map sends the distinguished element $1$ to the map.
\end{proof}

By universal property of the centralizer, 
Lemma~\ref{L:ComTriangCent} implies that the pairing $\ev_{{\bf f}}$ induces a canonical morphism 
\begin{equation}
\label{eq:canonicaltocenter}
\theta_{{\bf f}}: \clies(\fg\otimes \Omega , (\bU_n \fh)_f ) \longrightarrow  {\bZ}(\mathbf{f})
\end{equation}
of factorization algebras.


\subsection{The map $\theta_{{\bf f}}$ is a weak equivalence.} 

We have seen that $\clies(\fg\otimes \Omega , (\bU_n \fh )_f)$ is a locally constant factorization algebra,
and we know the centralizer $\bZ({\bf f})$ is too.
Thus, to show that the map $\theta_{{\bf f}}$ is a weak equivalence (or quasi-isomorphism) of factorization algebras,
it suffices to show it is a quasi-isomorphism when evaluated on open balls.
By local constancy, it is enough just to check on the open set~$\RR^n$ itself.
This we now prove, and hence finish the proof of the central theorem.

\begin{lmm}
\label{L:thetaquisondisk}
The canonical map~\eqref{eq:canonicaltocenter}
\[
\theta_f(D): \clies(\fg\otimes \Omega (D),  (\bU_n \fh)_f) \longrightarrow \bZ(\mathbf{f})(D)
\] 
 is a quasi-isomorphism for any open ball~$D$.
\end{lmm}

\begin{proof}
Recall from Section~\ref{sec: centralizer} that 
\begin{align*}
{\frak Z}_n(f) &\simeq {{\rm Mor}}_{\Mod^{\EE_n}_{\UU_n\fg}}(\UU_n \fg, (\UU_n \fh)_f) \\
&\simeq {\rm Mor}_{\LMod_{\int_{S^{n-1}} \UU_n\fg}}(\UU_n \fg, (\UU_n \fh)_f)
\end{align*}
where 
\begin{itemize}
\item $(\UU_n \fh)_f$ denotes the object in $\Mod^{\EE_n}_{\UU_n\fg}$ --- equivalently, in $\LMod_{\int_{S^{n-1}}\UU_n}$ --- determined by~$f$, 
\item ${\rm Mor}_{\Mod^{\EE_n}_{\UU_n\fg}}(\UU_n \fg, (\UU_n \fh)_f)$ denotes the classifying object for maps (i.e. an internal mapping object) from $\UU_n\fg$ to $(\UU_n \fh)_f$ in the $\infty$-category $\Mod^{\EE_n}_{\UU_n\fg}$, and
\item ${\rm Mor}_{\LMod_{\int_{S^{n-1}} \UU_n\fg}} (\UU_n \fg, (\UU_n \fh)_f)$ denotes the classifying object for maps from ${\UU_n\fg}$ to $\UU_n \fh$ in the $\infty$-category $\LMod_{\int_{S^{n-1}}\UU_n\fg}$. 
\end{itemize}
In the case at hand, this object is eminently computable.

The notation $\int_{S^{n-1}}\UU_n\fg$ produces a factorization algebra on $\RR$.
Indeed,
\begin{align*}
\int_{S^{n-1}}\UU_n\fg 
&\simeq \cliels(\Omega^\bu_c(\RR_{> 0} \times S^{n-1}) \otimes \fg)\\
&\simeq \cliels(\Omega^\bu_c(\RR_{> 0}) \otimes H^*(S^{n-1}) \otimes \fg)
\end{align*}
because $(n-1)$-sphere is formal over the rationals (or reals). 
We thus see that 
\[
\int_{S^{n-1}}\UU_n\fg \simeq \UU_1 (H^*(S^{n-1}) \otimes \fg)
\]
The cohomology of the $(n-1)$-sphere is 
\[
R_n = k[\epsilon_{n-1}]/(\epsilon_{n-1}^2),
\] 
where $|\epsilon_{n-1}| = n-1$.
Since $\UU_1 (H^*(S^{n-1}) \otimes \fg)$ is manifestly equivalent to the dg algebra~$U(\fg \otimes R_n)$,
we find that 
\[
\int_{S^{n-1}}\UU_n\fg \simeq U(\fg \otimes R_n)
\]
as $E_1$ algebras.
Recall as well that $\UU_n \fg$ is quasi-isomorphic to $\Sym(\fg[1-n])$ as cochain complexes.

We have thus reduced the situation to familiar dg algebra via the equivalence
\[
{\rm Mor}_{\LMod_{\int_{S^{n-1}} \UU_n\fg}}(\UU_n \fg, (\UU_n \fh)_f) 
\simeq 
{\rm Mor}_{\LMod_{U(\fg \otimes R_n)}} (\Sym(\fg[1-n]), (\Sym(\fh[1-n]))_f).
\]
By the inclusion of the unit $k \hookrightarrow R_n = k \oplus k[1-n]$,
we obtain a canonical inclusion $i: U\fg \to U(\fg \otimes R_n)$ of dg associative algebras,
and so
\[
k \otimes_{U\fg} U(\fg \otimes R_n) \simeq \Sym(\fg[1-n]).
\]
Base change along $i$ thus gives rise to an equivalence 
\[
{\rm Mor}_{\LMod_{U\fg}} (k, (\Sym(\fh[1-n]))_f) \simeq {\rm Mor}_{\LMod_{U(\fg \otimes R_n)}} (\Sym(\fg[1-n]), (\Sym(\fh[1-n]))_f)
\]
of underlying cochain complexes, i.e. an equivalence after applying the forgetful functor. 
The left hand side is modeled by $\clies(\fg,(\Sym(\fh[1-n]))_f)$, 
the Lie algebra cochains of $\fg$ with coefficients in~$(\UU_n \fh)_f$, as desired.
Hence the map $\theta_{\bf f}$ is a quasi-isomorphism on any disk, as needed.
\end{proof}

\section{A few examples of the central result}

We apply our central result to important classes of Lie algebras: 
abelian, semisimple, and free.

\subsection{Abelian Lie algebras and an $\EE_n$ Hochschild-Kostant-Rosenberg theorem}

Given a free dg commutative algebra $A = \Sym(V^\bullet)$ generated by a cochain complex $V^\bullet$,
one can view it as an $\EE_n$ algebra via the forgetful functor determined by the operad map $\EE_n \to E_\infty$.
We will blithely view any commutative algebra as an $\EE_n$ algebra for any $n$ via this forgetting.

We also know that for an abelian dg Lie algebra~${\frak a}$, 
\[
\cliels({\frak a}) = \Sym({\frak a}[1])
\]
and hence provides a free dg commutative algebra.
This feature can be leveraged to prove the following result about $\EE_n$ centers of free commutative algebras.

\begin{prp}
Given a free dg commutative algebra $A = \Sym(V^\bullet)$ generated by a cochain complex $V^\bullet$,
its center ${\frak Z}_n(A)$ is equivalent to the $E_{n+1}$ algebra of its shifted polyvector fields 
\[
{\rm Poly}_n(A) = \Sym(V^\bullet \oplus (V\bullet)^\vee[-n]).
\]
\end{prp}

\begin{proof}
A cochain complex $V^\bullet$ is an abelian dg Lie algebra;
indeed, so is any shift $V^\bullet[k]$. 
Let $\fg_V$ denote $V^\bullet[-n+1]$ viewed as an abelian dg Lie algebra.
The Poincar\'e lemma for compactly supported de Rham forms on $\RR^n$ provides a canonical quasi-isomorphism
\[
\Omega^\bu_c(\RR^n) \xto{\simeq} \RR[-n]
\]
by the natural quotient map and hence determines a canonical quasi-isomorphism
\[
\cliels(\Omega^\bu_c(\RR^n) \otimes \fg_V) \xto{\simeq} \Sym(V^\bullet).
\]
This map makes sense on any ball in $\RR^n$ and thus implies that $\bU_n \fg_V$ is quasi-isomorphic as a $\Disk_n$ algebra to~$\Sym(V^\bullet)$.
Applying our central theorem, we see
\begin{align*}
\bZ_n(\fg_V) &= \clies(\Omega^\bu \otimes \fg_V, \bU_n \fg_V) \\
&= \Sym((\Omega^\bu \otimes \fg_V)^\vee[-1]) \otimes \Sym(\Omega^\bu_c \otimes \fg_V[1])\\
& \simeq \Sym(V^\bullet \oplus (V\bullet)^\vee[-n])
\end{align*}
because
\[
\Omega^\bu (\RR^n) \otimes \fg_V \simeq V[-n+1]
\]
so
\[
\Sym( (\Omega^\bu(\RR^n) \otimes \fg_V)^\vee[-1]) \simeq \Sym( V^\vee[-n]).
\]
This identification concludes the argument.
\end{proof}

This result is the simplest case of a generalized Hochschild-Kostant-Rosenberg theorem for commutative algebras viewed as $\EE_n$ algebras.
(The classic theorem proves the $n=1$ situation.)
Such a result is proved by very different methods in~\cite{CalWil}.
Now we swiftly describe how to use methods like those in this paper to prove a version of this powerful result.

Our approach applies only to a certain class of dg commutative algebras,
due to a technical hypothesis necessary to apply our methods.
We need as input an augmented dg commutative algebra $\epsilon: A \to k$ that admits a semifree resolution of the form $(\Sym(V^\vee), \partial)$, where $V$ is some graded vector space.
In other words, we want to know that the generators can be realized as the graded linear dual of some other graded vector space.
We say such an $A$ is of {\em type~($\star$)}.

\begin{prp}
Let $A$ be an augmented dg commutative algebra of type~($\star$).
Then 
\[
{\frak Z}_n(A) \simeq {\rm Poly}_n(A) \simeq \Sym_A(\TT_A[-n]).
\]
\end{prp}

\owen{This proposition should be phrased correctly. The RHS isn't quite correct unless $A$ is good enough.}

\begin{proof}
\owen{The method described in the email.}
\end{proof}

\owen{Also prove that the $\EE_n$ center of $\clies(\fg)$ is also $\clies(\fg, \UU_n \fg)$}

\begin{cor}
\label{cor: koszul dual to main theorem}
For any $L_\infty$ algebra $\fg$,
there is a quasi-isomorphism
\[
{\frak Z}_n(\clies(\fg)) \simeq \clies(\fg, \UU_n \fg).
\]
\end{cor}

\subsection{Reductive Lie algebras and a generalized Harish-Chandra homomorphism}

For a reductive Lie group $G$, the Harish-Chandra isomorphism is an isomorphism of commutative algebras
\[
Z(U(\fg)) \xto{\cong} {\rm Sym} (\fh)^W,
\]
where $\fh$ is a Cartan subalgebra of the Lie algebra $\fg$ of $G$ and $W$ is the Weyl group of $G$. 
Here $Z(U(\fg))$ denotes the ordinary center of the associative algebra~$U(\fg)$. 

The following result generalizes the Harish--Chandra isomorphism to the $\EE_n$ center of the  enveloping $\EE_n$ algebra. 

\begin{prp}
For $\fg$ a reductive \owen{semisimple?} Lie algebra with Cartan subalgebra~$\fh$ and Weyl group~$W$, 
there is a quasi-isomorphism of $\EE_{n+1}$ algebras
\[
{\frak Z}_n(\UU_n \fg) \simeq \clies (\fg) \otimes \Sym(\fh[1-n])^W.
\]
\end{prp}

\brian{Is there an explicit description of the $\EE_{n+1}$-structure for the RHS?}
\brian{Is the RHS formal, can we replace by Lie algebra cohomology.}

\begin{proof}
By the Poincar\'{e} lemma for de Rham forms and compactly supported de Rham forms, one has a canonical quasi-isomorphism
\[
\bZ_n(\UU_n \fg) \xto{\simeq} \clies\left(\fg, \Sym(\fg[1-n]) \right) .
\]
Since $\fg$ is reductive, there is a quasi-isomorphism \brian{do we actually need semisimple here?}
\[
\clies(\fg, \Sym(\fg[1-n]) \simeq \clies (\fg) \otimes \Sym(\fg[1-n])^G 
\]
where $G$ is a compact connected Lie group whose Lie algebra is $\fg$. 
Further, by the Chevalley restriction theorem one has 
\[
\Sym(\fg[1-n])^G \cong \Sym \left(\fh[1-n]\right)^W .
\]
\end{proof}

\owen{I think the usual Chevalley theorem only applies when $1-n$ is an even integer. I'm not sure what the theorem is called when $1-n$ is odd.}

\subsection{Free Lie algebras and free $\EE_n$ algebras}

\owen{Describe what we can of the center of a free $\EE_n$ algebra thanks to Ben's theorem}

\section{Functoriality of the centralizer construction}
\label{S:centerinFacAlg}

The universal property of centralizer (recall definition~\ref{D:centralizer}) implies that 
for any maps $A\stackrel{f}\to B$ and $B\stackrel{g}\to C$ of $\EE_n$ algebras, 
there is a natural map of $\EE_n$ algebras
\begin{equation}
\label{eqdef:canonicaltocentralizers} 
{\frak Z}_n(g) \otimes {\frak Z}_n(f) \longrightarrow {\frak Z}_n(g\circ f)
\end{equation}
that arises from following commutative diagram of $\EE_n$ algebras:
\[
\begin{tikzcd}
&   {\frak Z}_n(g) \otimes  {\frak Z}_n(f) \otimes A \arrow[rr, "\id\otimes \ev_f"] &&  {\frak Z}_n(g) \otimes  B \arrow[dr, "\ev_g"]\\
A \arrow[ur, "1\otimes \id_A"] \arrow[rr, "f"] && B \arrow[rr, "g"] \arrow[ur, "1\otimes \id_B"] && C 
\end{tikzcd}.
\]
When $f=g=\id_A:A\to A$, we thus obtain a canonical morphism 
\begin{equation} 
\label{eq:dgAssofcenter}
{\frak Z}_n(A){\otimes} {\frak Z}_n(A) \longrightarrow {\frak Z}_n(A).
\end{equation}
Lurie \cite{HA} has proved that this multiplication makes the center into an $E_1$ algebra in $\EE_n$ algebras 
and therefore an $E_{n+1}$ algebra, by Dunn additivity. 
%To be precise, there is the following result.
%
%\begin{prp}[\cite{LurieHA} Section 5] 
%\label{P:PtyCenter}
%\begin{itemize}
% \item The canonical map~\eqref{eq:dgAssofcenter} makes the center ${\frak Z}_n(A)$ into an $E_1$-algebra in the symmetric monoidal category of 
% $\EE_n$-algebras.
% \item There is a canonical equivalence of the $\infty$-category $E_1\mathrm{-Alg}(\EE_n\mathrm{-Alg})$ with $E_{n+1}\mathrm{-Alg}$.
%\end{itemize}
%\end{prp}

A compelling aspect of our construction is that one can see these properties in a barehanded fashion,
using familiar formulas with $L_\infty$ algebras.
(More accurately, via composition of convolution algebras.)
The goal of this section is to prove directly the following result.

\begin{thm}
\label{T:compcentralizer}
Let $f: \fg \rightsquigarrow \fh$ and $g: \fh \rightsquigarrow \fl$ be maps of  $L_\infty$ algebras,
and let $\bold{f}: \bU_n \fg \to \bU_n \fh$ and $\bold{g}: \bU_n \fh \to \bU_n \fl$ denote the induced maps of factorization algebras.
\begin{enumerate} 
\item There is a natural map of factorization algebras
\[
(-\star-) : \bZ_n(g) \otimes \bZ_n(f) \to \bZ_n(g \circ f),
\]
given by definition~\ref{def:comp}, 
that models the canonical map 
\[
{\frak Z}_n(g) \otimes {\frak Z}_n(f) \longrightarrow {\frak Z}_n(g\circ f).
\] 
\item If $f= \fg \stackrel{\id}\to \fg$, 
then the composition $(-\star-)$ makes $\bZ_n(\fg)$ into an 
augmented associative algebra {\em on the nose} in the 1-category of factorization algebras on~$\RR^n$,
and it models the center ${\frak Z}_n(\fg)$ as an $E_1$ algebra in $\EE_n$ algebras.
\end{enumerate}
\end{thm}

The proof follows by a steady accumulation of natural observations.

First, as discussed in Section~\ref{sec: dfn of centralizer fact alg},
given $L_\infty$ maps $f: \fg \to \fh$ and $g: \fh \to \fl$,
we obtain canonical $L_\infty$ maps
\[
\tilde{f}: \Omega^\bu_c(V) \otimes \fg \rightsquigarrow \Omega^\bu_c(V) \otimes \fh
\]
and
\[
\tilde{g}: \Omega^\bu_c(V) \otimes \fh \rightsquigarrow \Omega^\bu_c(V) \otimes \fl
\]
for each open set~$V$,
which are functorial in opens.
These $L_\infty$ maps correspond to maps of their Lie algebra chains and hence we obtain
\[ 
\mathbf{f}: \bU_n \fg \to  \bU_n \fh \quad \text{and} \quad \mathbf{g}: \bU_n \fh \to  \bU_n \fl,
\]
maps between their enveloping factorization algebras.
The composite $L_\infty$ maps $g \circ f: \fg \rightsquigarrow \fl$ determines canonically a map
\[
\mathbf{g \circ f}: \bU_n \fg \to \bU_n \fl
\]
of factorization algebras.

Now recall that
\[
\clies(\Omega^\bu \otimes \fg, (\bU_n \fh)_f) = \Hom^\bullet(\cliels(\Omega^\bu \otimes \fg), \cliels(\Omega^\bu_c \otimes \fh)_f)
\]
and similarly for the centralizer~$\bZ_n(g)$.
As linear maps compose and hence produce pairings between Hom-complexes,
we expect it should be obvious to produce the desired map
\begin{align*}
\Hom^\bullet(\cliels(\Omega^\bu \otimes \fh), \cliels(\Omega^\bu_c \otimes \fl)) 
\otimes \Hom^\bullet(&\cliels(\Omega^\bu \otimes \fg), \cliels(\Omega^\bu_c \otimes \fh))\\
 &\xto{{\rm comp}} \Hom^\bullet(\cliels(\Omega^\bu \otimes \fg), \cliels(\Omega^\bu_c \otimes \fl)).
\end{align*}
This map is easily concocted thanks to the canonical inclusion $\iota_V: \Omega^\bu_c(V) \hookrightarrow \Omega^\bu(V)$ for any open set~$V$.
Indeed, for any $\varphi \in \Hom^\bullet(\cliels(\Omega^\bu \otimes \fg), \cliels(\Omega^\bu_c \otimes \fh))$,
the composite $\iota_V \circ \varphi|_V$ lives in $\Hom^\bullet(\cliels(\Omega^\bu(V) \otimes \fg), \cliels(\Omega^\bu(V) \otimes \fh))$,
and so we define
\[
{\rm comp}(\psi, \varphi)|_V = \psi|_V \circ \iota_V \circ \varphi|_V \in \Hom^\bullet(\cliels(\Omega^\bu(V) \otimes \fg), \cliels(\Omega^\bu_c(V) \otimes \fl))
\]
on each open~$V$.
This construction is functorial in the open $V$ and hence determines the desired map ${\rm comp}$.

This construction is {\em almost} what we need, 
but it does not take into account $f$ or $g$.
To do that, we need to recall that we view these Hom-complexes as describing the tangent spaces where the maps label the basepoints.
Once we do, a modest revision of formula above works.

Recall from Section~\ref{sec: review of linfty} the natural decomposition 
\[
\clies(\fg,(\cliels(\fh)_f)) \cong k \oplus \Hom^\bullet(\overline{\cliels(\fg)}, \cliels(\fh)_f)
\]
and that the summand $k$ corresponds to (scalar multiples of) the defining map~$f: \fg \rightsquigarrow \fh$.
(Abusively, here $f$, $\fg$, and $\fh$ are generic and are not those appearing in the theorem we are proving here.)
Hence, any element $\varphi$ in $\bZ_n(f)$, for instance, has the form
\[
\varphi =\lambda_\varphi {\bf 1_f} +\overline{\varphi}
\]
where $\lambda_\varphi \in k$ encodes the component in the first summand and $\overline{\varphi}$ denotes the component in the second summand.

\begin{dfn}
\label{def:comp}
For any open set $V$, we define the composition 
\[
\bZ_n(g)(V) \otimes \bZ_n(f)(V) \xto{(-\star-)} \bZ_n(g \circ f)(V)
\]
as follows.
For any element
\[
\psi=\lambda_\psi {\bf 1_g} +\overline{\psi} \in \bZ_n(g)(V) = \clies(\fh \otimes \Omega^\bu(V), (\bU_n \fl (V))_g  )
\]
and any element
\[
\varphi =\lambda_\varphi {\bf 1_f} +\overline{\varphi}\in \bZ_n(f)(V) = \clies(\fg \otimes \Omega^\bu(V), (\bU_n \fh (V))_f  ),
\] 
set
\[
\psi \star \varphi =  
\lambda_{\psi} \lambda_{\varphi} \mathbf{1_{g\circ f}}
+ \lambda_\psi \,g \circ \overline{\varphi} 
+ \lambda_{\varphi}\, \overline{\psi} \circ \iota_V \circ f 
+\overline{\psi} \circ \iota_V \circ \overline{\varphi} 
\]
where the inclusion $\iota_V: \Omega^\bu_c(V) \hookrightarrow \Omega^\bu(V)$ is extended in the obvious, functorial way to this setting.
\end{dfn}

Since $\iota_V$ is an embedding for every open $V$, 
we will usually omit it in the formulas for the rest of the paper.

\owen{Greg gave the above definition for {\em connected} open sets and then extended it to disconnected open sets b an explicit formula. 
I don't see why that's necessary (but maybe I'm being silly), so I've cut it as I am aiming for concision.
We can revive Greg's argument if needed.}

By direct inspection this construction is functorial in opens and respects structure maps.

\begin{lmm}
\label{L:compisfacmap} 
The composition 
\[
 \bZ_n(g) \otimes  \bZ_n(f) \xto{(-\star-)}  \bZ_n(g \circ f)
\]
 is a map of factorization algebras.
\end{lmm}

It is also straightforward to check the following properties,
which we record as a trio of lemmas.
The first is about associativity.

\begin{lmm}
\label{L:compisassociative} 
Let $f: \fg \rightsquigarrow \fh$, $g: \fh \rightsquigarrow \fl$ and $h: \fl \rightsquigarrow \fk$ be maps of $L_\infty$ algebras.
For any $\varphi \in \bZ_n(f)$, $\psi \in \bZ_n(g)$, and $\gamma \in \bZ_n(h)$,  
the equality 
\[ 
(\gamma\star \psi)\star \varphi \;=\; \gamma\star (\psi \star \varphi)  
\]
holds in $\clies\big(\fg\otimes \Omega^\bu, (\bU_n \fk)_{h \circ g \circ f} \big)$.
\end{lmm}

The second verifies that augmentations are preserved.

\begin{lmm}
\label{L:compisaugmented} 
For any $\varphi \in \bZ_n(g)$ and
$\psi \in \bZ_n(f)$,
the following equalities 
\begin{align}
\overline{\psi\star \varphi} &\;= \;\mathbf{1_g}\star \overline{\varphi} +\overline{\psi}\star \mathbf{1_f} +\overline{\psi}\star \overline{\varphi} \\
\mathbf{1_g}\star \varphi &\;=\;  (\lambda_\varphi \mathbf{1_{g \circ f}}, g\circ \overline{\varphi})\\
\psi \star \mathbf{1_f} &\;=\; (\lambda_\psi \mathbf{1_{g \circ f}}, \overline{\psi} \circ f) 
\end{align}
hold in $\bZ_n(g \circ f) = k  \oplus \overline{\clies\big(\fg \otimes \Omega^\bu, (\bU_n \fl)_{g \circ f}  \big)}$.
In particular, $\mathbf{1_g} \star \mathbf{1_f} =\mathbf{1_{g \circ f}}$.
\end{lmm}

The third is about compatibility with the pairings that characterize the centralizers.
 
\begin{lmm}
\label{L:NatPptyofComp}
 The diagram of factorization algebras 
 \[
 \small
 \begin{tikzcd}
 \bZ_n(g)
 \otimes  \bZ_n(f) \otimes \bU_n \fg \arrow[rd, "(-\star-)\otimes \id"]
 \arrow[dd, "\id\otimes \ev_ {\mathbf{f}}"]& \\ 
 & \bZ_n(g \circ f)
 \otimes \bU_n \fg
 \arrow[dd, "\ev_{\mathbf{g}\circ \mathbf{f}}"]\\
\bZ_n(g) \otimes \bU_n \fh  \arrow[rd, "\ev_{\mathbf{g}}"] & \\  
 & \bU_n \fl. 
\end{tikzcd}
\]
 is commutative.
\end{lmm}

\owen{I did not include a proof because I think it's immediate once you write down the formulas,
but maybe I'm overly optimistic.}


\begin{proof}[Proof of Theorem~\ref{T:compcentralizer}]
By the universal property of centralizers, 
the canonical map~\eqref{eqdef:canonicaltocentralizers} is the unique map 
\[ 
\Upsilon: {\frak Z}_n(g) \otimes {\frak Z}_n(f) \longrightarrow {\frak Z}_n(g\circ f)
\] 
of $\EE_n$ algebras (up to a contractible space of choices) that makes the following diagram
\begin{equation}
\label{eq:comdiagforcentralizercomput}
\xymatrix{
&   &&  
{\frak Z}_n(g\circ f) \otimes  \UU_n \fg  \ar@/^{2pc}/[dddr]^{\ev_{g\circ f}}\\
&{\frak Z}_n(g) \otimes  {\frak Z}_n(f) \otimes \UU_n \fg \ar@/^{1pc}/[rru]_{ \Upsilon \otimes \id_{\UU_n \fg}} \ar[rrd]_{\id\otimes \ev_{f}}
&& (\dagger)
& & \\
\UU_n \fg \ar[ur]_{1^{\otimes 2}\otimes \id_{\UU_n \fg}} \ar@/_{1pc}/[rrd]^{f} \ar@/^{6pc}/[rrruu]_{1\otimes \id_{\UU_n \fg}} &&&
{\frak Z}_n(g) \otimes \UU_n \fh \ar[rd]^{\ev_{h}}  &\\
&& \UU_n \fh \ar[rr]^{g} \ar[ur]^{1\otimes \id_{\UU_n \fh}} && \UU_n \fl .
}
\end{equation}
commutative.
%Note that the lower part of the diagram commutes by definition of centralizers.

The diagram above is model-independent,
but we will check that the analogous diagram~\eqref{eq:comdiagforcentralizercomput} commutes when we use our models $\bU_n (\fg)$, $\bZ_n(f)$, and so on for the objects and when we use our factorization maps $\ev_{{\bf f}}$ (for $\ev_f$), ${\bf 1}$ (for the unit elements $1$),  and so on.
In particular, we use $(-\star-)$ for~$\Upsilon$.

The commutativity of the bottom square and bottom triangle follows from Lemma~\ref{L:ComTriangCent}.
The square with ($\dagger$) in the middle follows from Lemma~\ref{L:NatPptyofComp}.
The top triangle commutes by Lemma~\ref{L:compisassociative}. 
Thus we have shown statement~(1) of the theorem.

To prove statement~(2), we note that we have the associative multiplication.
Since here $f=g=\id_A$, we have the unitality,
while the augmentation is provided by Lemma~\ref{L:compisaugmented}.
\end{proof}

\section{Higher calculus {\it \`a la} Kontsevich-Soibelman}
\label{sec: TT}

The $\EE_n$ center ${\frak Z}_n(A)$ of an $\EE_n$ algebra $A$ is a rich object 
and controls how other algebras can act on $A$ as an $\EE_n$ algebra.
In a precise sense that we will discuss below, 
it is the {\em universal} $\EE_{n+1}$ algebra that acts on $A$ {\em qua} $\EE_n$ algebra. 

As a familiar example, consider the degenerate situation of an $\EE_0$ algebra $V$, 
which is simply a cochain complex with a cochain map $k \to V$.
The $\EE_0$ center ${\frak Z}_0(V)$ is then $\End^\bullet(V)$,
the dg associative algebra that controls all actions of algebras on~$V$:
an action of an algebra $A$ on $V$ is equivalent to giving an algebra map $A \to \End^\bullet(V)$.
As another example, the $\EE_1$ center of a dg associative algebra $A$ is modeled by the Hochschild cochains $\Hoch^\bullet(A,A)$,
which is an $\EE_2$ algebra by Deligne's conjecture and which controls actions of $\EE_2$ algebras on~$A$.

Our model for $\EE_n$ centers of enveloping $\EE_n$ algebras provides useful insight into the behavior of centers and into how they interact with factorization homology.

Before we explore consequence of our results,
we review some key results about $\EE_n$ centers and how they act.
In Section \ref{sec:swiss} below, we will recall an elegant operadic articulation of how an $\EE_{n+1}$ algebra can act on an $\EE_n$ algebra 
and then we rephrase it in terms of {\em constructible factorization algebras} on a half-space~$\HH^{n+1}$. 
\owen{Mention lots of prior work, e.g., Greg et al, Ayala-Francis, Geoffroy Horel, and so on}.

\subsection{Swiss cheese pairs well with centers} \label{sec:swiss}

We review now the notion of Swiss cheese algebras.
As with the $\EE_n$ operad, we will first fix a specific presentation but will then use Swiss cheese to mean any equivalent operadic structure.

First, observe that given an $\EE_{n+1}$ algebra $B$, 
one can speak of its $\infty$-category of left (or right) modules.
This $\infty$-category is obtained by ``forgetting" the $\EE_{n+1}$ algebra to an $\EE_1$ algebra and then taking the left-modules for this underlying $\EE_1$ algebra.
This $\infty$-category has a natural $\EE_n$-monoidal structure by tensoring over~$B$
\owen{citation to Lurie?}, a rather nontrivial result.

Recall now the topological operad of little $n$-disks whose operations are parametrized by configurations of disjoint unions of $n$-disks inside a big $n$-disk.
There is a natural extension to a two-colored topological operad where the first color is an $n$-disk and the second color is an $n$-dimensional semi-disk, 
and whose operations are parametrized by configurations of disjoint unions of disks and semi-disks, where the disks live in the interior of a big semi-disk and where the little semi-disks have their straight boundary lying on the boundary of the big semi-disk.\owen{Citations?}

If one works through the definition, one finds that a Swiss cheese algebra consists of  a pair $(B, M)$, 
where $B$ is an $\EE_{n+1}$ algebra and $M$ is an $\EE_n$ algebra in the $\infty$-category of left-modules for~$B$.
The crucial example is that the pair $(\fZ_{n} (A), A)$ naturally determines a Swiss cheese algebra, 
in fact, the {\em universal} such pair in a sense conjectured by Kontsevich \cite{}.

\begin{thm}[\cite{Thomas, Tamarkin, Dolgushev, jnkf others?}] 
For any $\EE_n$ algebra $A$ and any $\EE_{n+1}$ algebra~$B$,
the space of Swiss cheese algebras whose underlying algebras are $B$ and $A$, respectively,
is weakly equivalent to the space of maps of $\EE_{n+1}$ algebras $B \to \fZ_n(A)$. 
\end{thm}

In this paper, we will use two models for algebras over the $(n+1)$-dimensional Swiss cheese operad. 
The first is obtained by considering pairs of locally constant factorization algebras on an $n$-dimensional manifold. 

\begin{dfn}
\label{dfn:pair}
A {\em factorization sc-pair} on a manifold $M$ is a pair $(\bB, \bM)$ where
\begin{itemize}
\item $\bB$ is an associative algebra in locally constant prefactorization algebras;
\item $\bM$ is a locally constant prefactorization algebra together with map $\bB \to \bZ_n(\bM)$ of associative algebras in prefactorization algebras.
\end{itemize}
\end{dfn}

\begin{rmk}
Since our focus is on concrete models, we mean here a strictly associative algebra $\bB$ in the 1-category of prefactorization algebras on $M$,
and the map $\bB \to \bZ_n(\bM)$ should be strictly associative.
It is straightforward to take such a pair and produce a Swiss cheese algebra in an $\infty$-categorical sense.
In this paper we will always go in this concrete-to-abstract direction,
never needing to start with a Swiss cheese algebra and produce a factorization sc-pair.
\end{rmk}

An immediate consequence of Theorem~\ref{thm:lurie1} and Theorem~\ref{thm: centralizer} is that a factorization sc-pair on $\RR^n$ determines an algebra over the $(n+1)$-dimensional Swiss cheese operad. 

In the next section we will recall a different model for algebras over the $(n+1)$-dimensional Swiss cheese operad in terms of constructible factorization algebras on $(n+1)$-dimensional manifolds with boundary. 

\subsection{A Koszul pairing with enveloping $\EE_n$ algebras}

We now briefly remark on how Corollary~\ref{cor: koszul dual to main theorem} lets us see aspects of $\EE_n$-Koszul duality in concrete terms.
Note that $\clies(\fg)$ and $\UU_n(\fg)$ have equivalent $\EE_n$ centers.
If we choose to view $\clies(\fg)$ as an $\EE_n$ algebra in {\em right} modules for ${\frak Z}_n(\fg)$,
then we can consider the relative tensor product
\[
\clies(\fg) \otimes_{{\frak Z}_n(\fg)} \UU_n \fg
\]
and obtain an $\EE_n$ algebra in cochain complexes.
Our models let us show that this relative pairing is trivial, in the following sense.

\begin{lmm}
There is an equivalence  
\[
k \simeq \clies(\fg) \otimes_{{\frak Z}_n(\fg)} \UU_n \fg
\]
of $\EE_n$ algebras.
\end{lmm}

\begin{proof}
Our model $\bZ_n(\fg)$ is an strict associative algebra, and our models $\clies(\Omega^\bu \otimes \fg)$ and $\bU_n\fg$ are strict right, respectively left, modules over $\bZ_n(\fg)$.
On each open set~$V$, we compute
\begin{align*}
\clies(\Omega^\bu(V) \otimes \fg) &\otimes^\LL_{\bZ_n(\fg)(V)} \bU_n(V) \\
&\simeq \clies(\Omega^\bu(V) \otimes \fg) \otimes^\LL_{\Hom^\bullet(\cliels(\Omega^\bu(V) \otimes \fg, \cliels(\Omega^\bu_c(V)\otimes \fg))} \cliels(\Omega^\bu_c(V)\otimes \fg)
\end{align*}
and it is a standard argument to show that this relative tensor product is the unit.
\end{proof}

\owen{Lurie has a beautiful discussion of such pairings somewhere,
so maybe we can borrow his riffs and extend the above in a nice way.}

\subsection{How factorization homology intertwines with taking the center}

A natural question in our setting is what happens to our pair $(\bZ_n(\fg), \bU_n \fg)$ when we take factorization homology.
As we will see below, the behavior is optimal.

Let us start with a discussion of the general situation.
Let $(A,B)$ be a Swiss cheese pair: $A$ is an $E_1$ algebra in $\EE_n$ algebras and $B$ is an $\EE_n$ algebra in left $A$-modules. 
We will freely view these as locally constant factorization algebras on framed $n$-manifolds.
Observe that since factorization homology is a symmetric monoidal functor, 
it is immediate that $\int_S B$ is a left module over $\int_S A$.
Indeed, for any $(n-k)$-dimensional framed manifold $S$, 
taking factorization homology $\int_S B$ yields a locally constant factorization algebra on $\RR^k$ 
and this factorization structure is compatible with the left action of $\int_S A$ as a locally constant factorization algebra on $\RR^k$.
The universal property of the center implies there is then a canonical map
\[
\int_{S} A \to \fZ_k \left( \int_S B \right).
\]
In particular, when $A = \fZ(B)$, we have
\begin{equation}
\label{eqn: can cen int}
\int_{S} \fZ(B) \to \fZ_k \left( \int_S B \right),
\end{equation}
so that taking centers intertwines with taking factorization homology.
In our favorite case, this relationship is as nice as possible.

\begin{prp}
\label{prp: z commutes with int}
For any $L_\infty$ algebra $\fg$ and any closed $(n-k)$-dimensional manifold $S$,
the canonical map of $E_k$ algebras
\[
\int_{S} \fZ_n(\fg) \to \fZ_k \left( \int_S \UU_n \fg \right)
\]
is a weak equivalence.
\end{prp}

As a slogan, we say ``factorization homology commutes with taking centers,'' 
at least for enveloping $\EE_n$ algebras.
It is natural to ask whether this result holds in general.

\begin{qtn}
Is the canonical map \eqref{eqn: can cen int} a weak equivalence when $\UU_n \fg$ is replaced by an arbitrary $\EE_n$ algebra?
\end{qtn}

Even in the classical setting of associative algebras, it seems \dots

\owen{For all the associative algebras I tried, it seemed like this way true, but I only tried a very short list ...}

\begin{proof}[Proof of Proposition~\ref{prp: z commutes with int}]
The key fact is a simple consequence of the K\"unneth theorem in the setting of de Rham forms.
Let $S$ be the closed $n-k$-dimensional manifold of the proposition,
and let $V$ be an arbitrary manifold without boundary.
Then there is a canonical map
\[
\Omega^\bu(V) \otimes \Omega^\bu(S) \to \Omega^\bu(V \times S),
\]
by wedge product after pulling back along the two projection maps.
It is a quasi-isomorphism, by K\"unneth.
Similarly, the canonical map
\[
\Omega_c^*(V) \otimes \Omega^\bu(S) \to \Omega_c^*(V \times S),
\]
is a quasi-isomorphism, as $S$ is compact.

Let $\fg_S$ denote the $L_\infty$ algebra $\Omega^\bu(S) \otimes \fg$. 
Then these quasi-isomorphisms above imply there are quasi-isomorphisms of $L_\infty$ algebras
\begin{align*}
\Omega^\bu(V) \otimes \fg_S &\xto{\simeq} \Omega^\bu(V \times S) \otimes \fg \\
\Omega_c^*(V) \otimes \fg_S &\xto{\simeq} \Omega_c^*(V \times S) \otimes \fg 
\end{align*}
and hence a quasi-isomorphism
\[
\bU_k \fg_S \xto{\simeq} \int_S \bU_n \fg
\]
of factorization algebras.

Likewise, on each open set $V \subset \RR^k$, 
we obtain a quasi-isomorphism
\[
\bZ_k(\fg_S)(V) \cong \clies( \Omega^\bu(V) \otimes \fg_S, \bU_k \fg_S) \xto{\simeq} \clies(\Omega^\bu(V \times S) \otimes \fg, \bU_n(V \times S))
\]
and this map is functorial in opens.
The righthand side is, however, the pushforward $\int_S \bZ_n \fg$.
\owen{That map is not the canonical map as it goes the ``wrong way,'' but I'm pretty sure it provides the inverse-up-to-qiso we need.}
\end{proof}

In the case $k = 0$, we have the immediate corollary that
\[
\int_{S} \fZ_n(\fg) \simeq \fZ_0 \left( \int_S \UU_n \fg \right) ,
\]
which unwinds to 
\begin{equation}
\label{eqn: taut}
\clies(\fg \otimes \Omega^\bu(S), \cliels(\fg \otimes \Omega^\bu(S)) \simeq \End^\bullet(\cliels(\fg \otimes \Omega^\bu(S))),
\end{equation}
which looks rather tautological.
Nonetheless, by using other models for factorization homology,
one obtains less obvious identifications.

Consider first the case $n=1$ and $B = U \fg$. 
A classic result of \cite{HochSerre} is that the Hochschild cohomology of $U \fg$ can be expressed in terms of Lie algebra cohomology as 
\[
\Hoch^*(U\fg,U\fg) \simeq \clies(\fg, U\fg^{ad}).
\] 
On the right-hand side, we take the Chevalley--Eilenberg cochain complex with values in the module $U \fg$ equipped with the adjoint action.
The algebra structure is given by a special case of the convolution product as in Section~\ref{??}. 

On the other hand, our model for the derived center ${\frak Z}(U(\fg))$ of $U \fg$ is the one-dimensional factorization algebra assigning the cochain complex
\[
\clies(\fg \otimes \Omega^\bu(U), \cliels( \fg \otimes \Omega^\bu_c(U)))
\]
to each open set $U \subset \RR$.
In the case that $U$ is an interval, this cochain complex is quasi-isomorphic to $\clies (\fg , U\fg^{ad})$.
Furthermore, one can verify that the resulting $E_1$ algebra structure agrees with the one coming from convolution. 

Our model also gives us a simple description of the factorization homology of the derived center along the circle~$S^1$:
\begin{align*}
\Hoch_\bu(\Hoch^\bu(U \fg, U\fg)) 
&\simeq \int_{S^1} {\frak Z}(U(\fg)) \\
&\simeq \clies(\fg[\epsilon], \cliels( \fg[\epsilon])),
\end{align*}
where $\epsilon$ is a formal variable of degree~$1$. 
In the last step we use the fact that the circle is formal as a rational space.
\brian{For $n=1$, this recovers a theorem of Tamarkin and Tsygan \cite{TT} on the Hochschild cohomology of differential operators on a Lie group $G$;
see Example~\ref{eg: TT}(cf. section 2.6).
We could describe an $\EE_n$ generalization?}

\owen{Other manifolds? Products of circles? Spheres?}

\subsection{Cyclic homology and the large $N$ limits of $\UU_n \fgl_N$ and ${\frak Z}_n(\fgl_N)$}

In the case of the infinite series of Lie algebras, 
there are theorems that tell us about the limiting behavior of Lie algebra chains and cochains as $N$ goes to infinity.
These can be applied to our models to obtain striking results about factorization homology.

\def\Dih{{\rm Dih}}

Let $\Cyc_*(A)$ denote the {\em cyclic chains} of a dg associative algebra~$A$.
A key theorem --- one of the original motivations for cyclic homology --- is the Loday-Quillen-Tsygan (LQT) theorem \cite{},
which provides an explicit quasi-isomorphism
\begin{equation}
\label{eqn: LQT}
\cliels(\fgl_\infty(A)) \xto{\simeq} \Sym(\Cyc_*(A)[1])
\end{equation}
for any unital dg associative algebra~$A$.
A similar result \cite{} holds when we replace $\fgl_N$ by $\frak{so}_N$ or $\frak{sp}_N$, with
\[
\label{eqn: LQT}
\cliels({\frak{so}}_\infty(A)) \xto{\simeq} \Sym(\Dih_*(A)[1]),
\]
with $\Dih_*$ denoting the dihedral chains.
Note that one can use either $\frak{so}_N$ or $\frak{sp}_N$ on the left hand side.

\owen{Please verify my conditions, as I got a bit confused between different sources.}

Another key theorem, due to Jones \cite{} for cyclic chains and extend to dihedral chains by Ungheretti \cite{},
is that
\[
\Cyc_*(\Omega^*(M)) \simeq \Omega^*(LM/^h S^1)
\]
for a simply connected manifold $M$, 
where $LM/^h S^1$ denotes the homotopy quotient of the free loop space $LM$ under the canonical rotation action on loops,
and where we mean some model of cochains on the right hand side.
In other words, the right hand side is the $S^1$-equivariant cochains of the free loop space.
(This result holds, more generally, for a simply connected topological space of finite type, so long as one uses an appropriate model of cochains of the space, 
but we focus here on manifolds.)

From hereon we will work only with cyclic chains and $\fgl$,
but one obtains immediate analogs by replacing those with dihedral chains and $\frak{so}$ or~$\frak{sp}$.

As a first observation, let us see what this result implies about factorization homology of the enveloping $\EE_n$ algebra.

\begin{lmm}
For a closed $n$-dimensional manifold~$M$, 
\begin{align*}
\int_M \UU_n(\frak{gl}_\infty)
&\simeq \cliels(\Omega^*(M) \otimes \fgl_\infty) \\
&\simeq \Sym(\Cyc_*(\Omega^*(M))[1]) \\
&\simeq \Sym(\Omega^*(LM/^h S^1))[1])).
\end{align*}
\end{lmm}

Although this result is immediate from the theorems we just mentioned,
it is rather surprising to see the {\em cyclic loop space} $LM/^h S^1$ appears out of taking a large $N$ limit of factorization homology.
Note that this identification provides a commutative algebra structure on the factorization homology for $\fgl_\infty$, 
which is nowhere to be seen for~$\fgl_N$.

\begin{qtn}
Is there some local version of this relationship? That is, can we obtain a version of the LQT theorem at the level of $\EE_n$ algebras such that factorization homology recovers the quasi-isomorphism of this lemma?
\end{qtn}

This kind of result is especially interesting from the perspective of physics, 
as a kind of topological gauge/string duality.
In Section~\ref{sec: TFT} we explain how $\UU_n(\fgl_\infty)$ can be understood as the {\em quantum observables} of a gauge theory for the Lie algebra $\fgl_\infty$.
In this sense, the left hand side of the lemma $\int_M \UU_n(\frak{gl}_\infty)$ describes the global quantum observables over the manifold $M$.
On the right hand side, we see the cyclic loop space of $M$,
which arises naturally as the configuration space of a closed string theory with target~$M$.
Indeed, those familiar with closed string field theory will recognize the right hand side as related to the ``Fock space'' of such a theory.
\owen{Check me, Bri-guy.}

Now let's examine what our calculus results imply;
we simply apply quasi-isomorphism~\eqref{eqn: taut} in conjunction with the theorems.

\begin{lmm}
For a closed $n$-dimensional manifold~$M$, 
\[
\clies(\fgl_\infty \otimes \Omega^\bu(M), \cliels(\fgl_\infty \otimes \Omega^\bu(M)) \simeq \End^\bullet(\Sym(\Omega^*(LM/^h S^1))[1])))
\]
where the left hand side is the factorization homology of $\EE_n$ center ${\frak Z}_n(\fgl_\infty)$ and the right hand side is the $\EE_0$ center of the factorization homology of~$\UU_n \fgl_\infty$.
\end{lmm}

In physical terms, the right hand side encodes the algebra of operators on the Fock space of a closed string field theory.
Hence this statement provides a novel way to construct that algebra.
Even better, in Section~\ref{sec: TFT}, we identify the left hand side as the quantum observables of the topological BF theory for $\fgl_N$ on $M \times \RR$.
In this sense we have deepened the topological gauge/string duality just introduced.

\section{Centers and topological field theories}
\label{sec: TFT}
%
%Given an $E_{n+1}$-algebra one can speak of its $\infty$-category of left (or right) modules.
%This is obtained by ``forgetting" the $E_{n+1}$-algebra to an $E_1$-algebra then considering the left-modules for this $E_1$-algebra.
%
%The $\EE_n$ center, or $\EE_n$ Hochschild cohomology, of an $\EE_n$-algebra $A$ is the {\em universal} $E_{n+1}$-algebra which acts on $A$. 
%In Section \ref{sec:swiss} below, we will recall an elegant operadic interpretation of this universal picture and interpret it in terms of {\em constructible factorization algebras}. 
%In the case of $\EE_n$-enveloping algebras, we will provide a strict factorization model of this universal situation in terms of a constructible factorization algebra on an $(n+1)$-dimensional 
%manifold with boundary. 
%
%We will furthermore provide an interpretation of this constructible factorization algebra in terms of the quantization of a certain topological field theory. 
%The key insight is that there is a {\em classical limit} of the $\EE_n$-center $\fZ_n(\fg)$ which is equivalent to the observables of an $(n+1)$-dimensional topological field theory known as {\em BF theory}. 
%Likewise, there is a classical limit of $\UU_n(\fg)$ which can be viewed as a boundary condition for BF theory.
%
%In this sense, topological BF theory is the universal $(n+1)$-dimensional field theory which has the $\EE_n$-enveloping algebra as a boundary condition. 
%This partially confirms the terminology used in \cite{ButsonYoo}  of topological BF theory as the ``universal bulk theory" of $\UU_n(\fg)$. 

In this section, we turn to an interpretation of the $\EE_n$ center of an $\EE_n$ enveloping algebra in terms of a certain topological field theory (TFT).

Given an $\EE_n$ algebra $A$, the pair $(\fZ_n (A) , A)$ is an algebra over the $(n+1)$-dimensional Swiss cheese operad. 
The first objective is to define a certain ``classical limit" of this pair in the case that $A$ is an $\EE_n$ enveloping algebra. 

\begin{prp}
\label{prp:swiss1}
Let $\fg$ be an $L_\infty$ algebra. 
The pair $(\fZ_n(\fg) , \UU_n(\fg))$ is a filtered object in the $\infty$-category of algebras over the $(n+1)$-dimensional Swiss cheese operad. 
The resulting associated graded pair $({\rm Gr} \; \fZ_n(\fg) , {\rm Gr} \; \UU_n(\fg))$ is a commutative algebra object.
\end{prp}

The key insight is that there exists a filtration on our model $\bZ_n(\fg)$ for the $\EE_n$ center and our model $\bU_n (\fg)$ for the $\EE_n$ enveloping algebra  whose associated graded factorization algebras ${\rm Gr} \; \bZ_n(\fg)$ and ${\rm Gr} \; \bU_n(\fg)$ are commutative factorization algebras. 

Given a filtered associative algebra whose associated graded is commutative, there exists a Poisson bracket on the associated graded algebra. 
If the associated graded of a filtered $\EE_n$ algebra is commutative, then it carries the structure of a $\PP_n$ algebra, which is similar to a Poisson algebra except the bracket is of cohomological degree $1-n$. 
There is a similar description of the ``classical limit"  of algebras over the $(n+1)$-dimensional Swiss cheese operad in terms of algebras over a certain two-colored operad $\PP_{[n+1,n]}$, introduced by Safronov \cite{Pavel1, Pavel2}, whose definition we recall below.

\begin{prp} 
\label{prp:poisson}
The associated graded pair $({\rm Gr} \; \fZ_n(\fg) , {\rm Gr} \; \UU_n(\fg))$ determines an algebra over the operad $\PP_{[n+1,n]}$. 
\end{prp}


%The idea is too look at configurations of disks and half-disks inside of the upper-half space $\HH^{n+1} = \{(x_1,\ldots, x_{n+1}) \; | \; x_{n+1} \geq 0\}$. 
%What results is a two-colored operad known as the $(n+1)$-dimensional Swiss cheese operad where the two colors correspond to disks and half-disks. 

In the previous section, we mentioned another geometric model for algebras over the $(n+1)$-dimensional Swiss cheese operad in terms of constructible factorization algebras on $(n+1)$-manifolds with boundary.
One drawback of the previous section is that we did not provide a model of this type for the $\EE_n$ center of an enveloping algebra. 
The next goal of this section is to provide a model of the classical limit of the $\EE_n$ center as a constructible factorization algebra. 

Any constructible factorization algebra $\bA$ on $M \times \RR_{\geq 0}$ determines a factorization sc-pair $(\bA^\circ , \bA^{\partial})$ in the sense of Definition \ref{dfn:pair}.
We recall this construction in Section \ref{sec:bulk}. 
In particular, on the upper half space $\HH^n$, a constructible factorization algebra determines an algebra over the $(n+1)$-dimensional Swiss cheese operad. 

%Generally speaking, the local observables of a topological field theory on a manifold $M$ define a locally constant factorization algebra on $M$. 

\begin{prp}
\label{prp:pair}
Let $M$ be a smooth $n$-dimensional manifold and $\fg$ a Lie algebra. 
There is a constructible commutative factorization algebra ${\bf C}_n (\fg)$
%\begin{equation}\label{eqn:graded}
%\left({\bf Bulk}_n (\fg) \; , \; {\rm Gr} \; \bU_n(\fg) \right)
%\end{equation}
on $M \times \RR_{\geq 0}$ and a quasi-isomorphism of factorization sc-pairs
\[
\bigg( {\bf C}_n (\fg)^\circ \; , \; {\bf C}_n (\fg)^\partial \bigg) \xto{\simeq} \bigg({\rm Gr} \; \bZ_n(\fg), {\rm Gr} \; \bU_n(\fg) \bigg).
\]
In fact, $\bC_n(\fg)$ is a constructible $\PP_0$-factorization algebra and this quasi-isomorphism is compatible with Poisson structures.
\end{prp}

%A $\PP_0$, or $1$-shifted Poisson, algebra is a commutative dg algebra equipped with a bracket of cohomological degree $+1$ that satisfies a graded version of the Jacobi identity and is a biderivation with respect to the commutative product \brian{reference}. 
%Likewise, a $\PP_0$-factorization algebra is a factorization algebra whose value on each open set is $\PP_0$-algebra. 

Following the proof of this proposition, our main thrust is to interpret this result by exhibiting a topological field theory on the $(n+1)$-dimensional manifold with boundary $M \times \RR_{\geq 0}$ whose factorization algebra of classical observables is equivalent to the constructible factorization algebra $\bC_n(\fg)$. 
\brian{improve this pointer}
\owen{Somewhere please mention that the slogan ``quantization commutes with pushforward'' holds for this class of theories.}

%The Batalin--Vilkovisky (BV) formalism for studying quantum field theory \brian{finish}
%
%\brian{as a corollary butson-yoo}


%\begin{thm}
%Let $M$ be a smooth $n$-manifold and $\fg$ a Lie algebra. 
%There is a constructible factorization algebra on $M \times [0,1)$ satisfying the following properties:
%\begin{itemize}
%\item[(1)] On the $n$-dimensional stratum $M \times \{0\}$ the factorization algebra is equivalent to $\bU_n(\fg)$.
%\item[(2)] On the $(n+1)$-dimensional stratum $M \times (0,1)$, the factorization algebra is a quantization of the observables of topological BF theory based on the Lie algebra $\fg$.
%\item[(3)] Locally on $\RR^n \times [0,1)$ this factorization algebra produces \brian{deligne picture how to say}
%\end{itemize}
%\end{thm}

%Let $\fg$ be a dg Lie algebra and consider the $\EE_n$ algebra $\UU_n \fg$. 
%We have shown that a model for the $\EE_n$ center ${\frak Z}_n (\UU_n \fg) = {\frak Z}_n ({\rm id}_{\UU_n \fg})$ is the $n$-dimensional locally constant factorization algebra 
%\[
%\clie \left( \fg \otimes \Omega \; , \; \clieu (\fg \otimes \Omega_c) \right)  .
%\]

\subsection{The ``classical limit"}

We prove Proposition \ref{prp:swiss1} by exhibiting a filtration at the level of strict factorization algebras in our model of the $\EE_n$ center. 

For any $L_\infty$ algebra, the Chevalley--Eilenberg cochain complex computing Lie algebra homology admits a natural filtration whose associated graded has the structure of a commutative dg algebra.
If $\fh$ is an $L_\infty$ algebra, let $\clieu_{\leq k} (\fh)$ be the subcomplex of Chevalley--Eilenberg chains which is $\Sym^{\leq k} (\fh[1])$ as an underlying graded vector space. 
The associated graded cochain complex is the free symmetric algebra on $\fh[1]$ thought of as simply a cochain complex:
\[
{\rm Gr} \; \cliels (\fh) = {\rm Sym} (\fh [1])  .
\]
Here, the differential on the right-hand side is simply the underlying linear differential of $\fh$ (in terms of $L_\infty$ algebras, this is the $1$-ary operation $\ell_1$). 

Consider our factorization model for the $\EE_n$ enveloping algebra $\bU_n(\fg) = \cliels (\fg \otimes \Omega^\bu_c)$. 
The filtration on Chevalley--Eilenberg chains equips $\bU_n(\fg)$ with a filtration as a factorization algebra. 

There is a similar filtration on our model for the $\EE_n$ center $\bZ_n(\fg)$ defined by
\[
F^k \bZ_n(\fg) = \clies \bigg(\fg \otimes \Omega \; , \; \clieu_{\leq k} (\fg \otimes \Omega_c) \bigg) .
\]

Proposition \ref{prp:swiss1} is a direct consequence of the following lemma.

\begin{lmm}
These filtrations equip $(\bZ_n (\fg), \bU_n(\fg))$ with the structure of a filtered factorization sc-pair.
Moreover, the associated graded pair $({\rm Gr} \; \bZ_n (\fg), {\rm Gr} \; \bU_n(\fg))$ is a commutative factorization sc-pair. 
\end{lmm}
\begin{proof}
One has
\[
{\rm Gr} \; \UU_n (\fg) = {\rm Sym} \left(\fg \otimes \Omega^\bu_c [1] \right)
\]
and
\[
{\rm Gr} \; \bZ_n (\fg) = \clie^\bu\bigg(\fg \otimes \Omega^\bu \; , \; {\rm Sym} \left(\fg \otimes \Omega^\bu_c [1]\right) \bigg) 
\]
as factorization algebras. 
These are both commutative by direct inspection. 
\end{proof}

The associated graded factorization algebras ${\rm Gr} \; \bU_n (\fg)$ and ${\rm Gr} \; \bZ_n(\fg)$ are equipped with Poisson brackets that are compatible with the factorization structure. 

For $k \geq -1$, a {\em $\PP_k$-factorization algebra} is a factorization algebra $\bA$ such that for every open set $U$ the cochain complex $\bA(U)$ is equipped with the structure of a $\PP_k$ algebra. 
Furthermore, we require that the factorization structure maps be compatible with the $\PP_k$ algebra structure. 

Theorem \ref{thm:lurie1} combines with the additivity result of \cite{SafronovAdd} to show that there is an equivalence of categories between the category of locally constant $\PP_k$-factorization algebras on $\RR^n$ and $\PP_{n+k}$ algebras.  

In light of this, the following lemma implies that ${\rm Gr} \; \bU_n (\fg)$ and ${\rm Gr} \; \bZ_n(\fg)$ determine $\PP_n$ and $\PP_{n+1}$ algebras respectively. 

\begin{lmm}
\label{lmm:pois1}
Consider the factorization algebras ${\rm Gr} \; \bU_n (\fg)$ and ${\rm Gr} \; \bZ_n(\fg)$ on a manifold $M$.
Then
\begin{itemize}
\item ${\rm Gr} \; \bU_n (\fg)$ is equipped with the structure of a $\PP_0$-factorization algebra.
\item ${\rm Gr} \; \bZ_n(\fg)$ is equipped with the structure of a $\PP_1$-factorization algebra.
\end{itemize}
\end{lmm}

\begin{proof}
For any $L_\infty$ algebra $\fh$, the associated graded of the Chevalley--Eilenberg complex ${\rm Gr} \; \cliels {\rm Sym} (\fh [1])$ is equipped with the structure of a $\PP_0$ algebra.
It is given by the sum of the $L_\infty$-operations $\ell_2 + \ell_3 + \cdots$. 
This implies that ${\rm Gr} \; \bU_n (\fg)$ is a $\PP_0$-factorization algebra.

Next, recall that to an open set $U \subset M$ the factorization algebra ${\rm Gr} \; \bZ_n (\fg)$ assigns the cochain complex
\[
\clie^\bu\bigg(\fg \otimes \Omega^\bu (U) \; , \; {\rm Sym} \left(\fg \otimes \Omega^\bu_c(U) [1]\right) \bigg) = {\rm Hom}^\bu \bigg(\cliels(\fg \otimes \Omega^\bu(U)) , \cliels (\fg \otimes \Omega^\bu_c(U)) \bigg).
\]
For $U \subset M \times \RR_{>0}$ the underlying graded vector space of $\bC_n(\fg)(U)$ is of the form
\[
{\rm Hom}^\bu\left(\Sym(\fg \otimes \Omega^\bu (U)[1]) \; , \; {\rm Sym}  \left(\fg \otimes \Omega^\bu_c(U) [2] \right) \right)  .
\]
Let $x^* \otimes \alpha$ denote an homorphism of the form $\fg \otimes \Omega (U)[1] \to \Sym^0 = k$ and $y \otimes \beta$ denote a homomorphism $k = \Sym^0 \to \fg \otimes \Omega_c(U) [1]$. 
Then, the bracket involving the linear elements $x^* \otimes \alpha$ 
and $y \otimes \beta$ is defined by
\begin{align*}
\{x^* \otimes \alpha  , y \otimes \beta \} & = \<x^*, y\>_\fg \int_U \alpha \beta \\
\{x^* \otimes \alpha , x'^* \otimes \alpha' \} & = 0 \\
\{y \otimes \beta , y' \otimes \beta'\} & = 0 . 
\end{align*}
Here, $\<x^*, y\>_\fg$ denotes the linear pairing between $\fg$ and $\fg^*$ and $\int_U\alpha \beta$ denotes the linear pairing between compactly supported distributional differential forms and differential forms. 
\brian{how to say this now}
\end{proof}

The pair $(\fZ_n(\fg), \UU_n(\fg))$ is an algebra over the $(n+1)$-dimensional Swiss cheese operad. 
At the level of the associated graded algebras, we obtain an algebra over a certain classical limit of this operad which takes into account the aforementioned Poisson structures.

The definition of this two-colored operad $\PP_{[n+1,n]}$ can be found in \cite{SafronovCoiso}. 
A $\PP_{[n+1,n]}$ algebra consists of a pair $(A,B)$ where $A$ is a $\PP_{n+1}$ algebra and $B$ is a $\PP_n$ algebra which receives an action by $A$. 

The action of $\bZ_n(\fg)$ on $\bU_n(\fg)$ descends to an action at the level of the associated graded factorization algebras
Together with Lemma \ref{lmm:pois1}, we obtain Proposition \ref{prp:poisson}. 

\begin{rmk}
One way to formulate the definition of a $\PP_{[n+1,n]}$ algebra $(A,B)$ is to require a map of commutative dg algebras $A \to B$ together with a lift to a map of $\PP_{n+1}$ algebras $A \to \fZ_{\PP_n} (B)$, where $\fZ_{\PP_n}(B)$ is the {\em $\PP_n$ center} of the $\PP_n$ algebra $B$. 
By a similar proof as in the main part of the paper, we expect that one can see that the factorization algebra
\[
\clies \bigg(\Omega^\bu \otimes \fg \; ; \; {\rm Sym} \left(\Omega^\bu_c \otimes \fg [1] \right) \bigg)
\]
is a model for the $\PP_n$ center of the {\em enveloping $\PP_n$ algebra} $\UU_{\PP_n} (\fg) = {\rm Sym} (\fg [1-n])$. 
\end{rmk}

\subsection{The bulk factorization algebra} \label{sec:bulk}

We turn towards a model for the $\EE_n$ center as a constructible factorization algebra. 

Before stating the definition of this model, we introduce the following variant of the de Rham complex of differential forms on $\RR_{\geq 0}$. 
Let $j : \RR_{>0} \hookrightarrow \RR_{\geq 0}$ be the embedding of the open ray into the closed ray. 
Define the complex
\[
\begin{tikzcd}
& \ul{0} & \ul{1} \\
\Tilde{\Omega}^\bu (\RR_{\geq 0}) = & \Omega^0 (\RR_{\geq 0}) \ar[r, "j^* \circ \d_{\rm dR}"] & \Omega^1(\RR_{>0})  .
\end{tikzcd}
\]
The commutative dg algebra structure on $\Tilde{\Omega}^\bu (\RR_{\geq 0})$ is defined by the rule
\[
f \cdot (g \, \d t) = (j^* f) g\, \d t .
\]

\begin{dfn}
\label{dfn:constructible1}
Let $\bC_n(\fg)$ be the following constructible factorization algebra on $M \times \RR_{\geq 0}$:
\begin{itemize}
\item to an open set $U \subset M \times \RR_{> 0}$, we assign the cochain complex 
\[
\bC_n (\fg) (U) = \clies \bigg(\fg \otimes \Omega^\bu (U) \; , \; \Sym \left(\fg \otimes \Omega^\bu_c(U) [2] \right) \bigg) .
\]
\item to an open set $V \times [0,\epsilon)$ we assign the cochain complex 
\[
\bC_n (\fg) (V \times [0,\epsilon)) = \clies\bigg(\fg \otimes \Omega^\bu(V) \Hat{\otimes} \Tilde{\Omega}^\bu([0,\epsilon))  \; , \; \Sym\left(\fg \otimes \Omega^\bu_c (V \times [0,\epsilon))[2] \right) \bigg).
\]
%\brian{this is wrong
%\[
%\bC_n (\fg) (V \times [0,\epsilon)) = {\rm Sym} \left(\fg \otimes \Omega^\bu_c (V \times [0,\epsilon) [2] \right).
%\]
%}
\end{itemize}
The structure map associated to the embedding 
\begin{equation}\label{eqn:embed}
i : U \sqcup V \times [0, \epsilon) \hookrightarrow V' \times [0,\epsilon')
\end{equation}
is given by the composition
\[
\begin{tikzcd}
\clies \bigg(\fg \otimes \Omega^\bu (U) \; , \; \Sym \left(\fg \otimes \Omega^\bu_c(U) [2] \right) \bigg) \; \otimes \;  \clies\bigg(\fg \otimes \Omega^\bu(V) \otimes \Tilde{\Omega}^\bu([0,\epsilon))  \; , \; \Sym\left(\fg \otimes \Omega^\bu_c (V \times [0,\epsilon))[2] \right) \bigg) \ar[d, "\simeq"] \\
\clies \bigg(\fg \otimes \left(\Omega^\bu (U) \oplus \Omega^\bu(V) \Hat{\otimes} \Tilde{\Omega}^\bu([0,\epsilon)) \right) \; , \; \Sym \left(\fg \otimes \left(\Omega^\bu_c(U) [2] \oplus \Omega^\bu_c(V \times [0,\epsilon)) [2]\right)\right) \bigg) \ar[d, "i^* \otimes i_*"] \\
\clies\bigg(\fg \otimes \Omega^\bu(V') \Hat{\otimes} \Tilde{\Omega}^\bu([0,\epsilon'))  \; , \; \Sym\left(\fg \otimes \Omega^\bu_c (V' \times [0,\epsilon'))[2] \right) \bigg).
\end{tikzcd}
\]
%\Sym \left(\fg \otimes \Omega^\bu_c(U) [2] \right) \; \otimes \; \Sym \left(\fg \otimes \Omega^\bu_c (V \times [0,\epsilon)) [2] \right) \ar[d, "\simeq"] \\
%\Sym\left(\fg \otimes \left(\Omega^\bu_c(U) \oplus \Omega^\bu_c(V \times [0,\epsilon)) \right) [2] \right) \ar[d, "i_*"]\\
%\Sym \left( \fg \otimes \Omega^\bu_c(V' \times [0,\epsilon')) [2] \right)
The first map uses the fact that the symmetric algebra functor is monoidal. 
The second map is induced from restriction and extension of de Rham forms and compactly supported de Rham forms along the embedding (\ref{eqn:embed}). 
\end{dfn}

\begin{rmk}
For an open $U \subset M \times \RR_{>0}$, pulling back along an embedding $\iota : U \hookrightarrow V \times [0,\epsilon)$ determines a composition of cochain complexes
\[
\Omega^\bu (V') \otimes \Tilde{\Omega}^\bu([0,\epsilon)) \xto{j^*}  \Omega^\bu (V') \Hat{\otimes} \Omega^\bu((0,\epsilon)) \cong \Omega^\bu(V \times (0,\epsilon)) \xto{\iota^*} \Omega^\bu(U) .
\]
This is our model for restriction $\iota^*$ of de Rham forms that is used in the definition above.
\end{rmk}

On each open set $U \subset M \times \RR_{\geq 0}$, the cochain complex $\bC_n(\fg) (U)$ is a dg commutative algebra. 
In fact, it has the structure of a $\PP_0$ algebra where the $1$-shifted bracket $\{\cdot, \cdot\}$ is defined as follows.

\begin{lmm}
$\bC_n(\fg)$ admits the structure of a constructible $\PP_0$ factorization algebra on~$M \times \RR_{\geq 0}$. 
\end{lmm}

\begin{proof}
For $U \subset M \times \RR_{>0}$ the underlying graded vector space of $\bC_n(\fg)(U)$ is of the form
\[
{\rm Hom}^\bu\left(\Sym(\fg \otimes \Omega^\bu (U)[1]) \; , \; {\rm Sym}  \left(\fg \otimes \Omega^\bu_c(U) [2] \right) \right)  .
\]
Let $x^* \otimes \alpha$ denote an homomorphism of the form $\fg \otimes \Omega (U) \to \Sym^0 = k$ and $y \otimes \beta$ denote a homomorphism $k = \Sym^0 \to \fg \otimes \Omega_c(U) [2]$. 
The bracket between these linear elements $x^* \otimes \alpha$ 
and $y \otimes \beta$ is defined by
\begin{align*}
\{x^* \otimes \alpha  , y \otimes \beta \} & = \<x^*, y\>_\fg \int_U \alpha \beta \\
\{x^* \otimes \alpha , x'^* \otimes \alpha' \} & = 0 \\
\{y \otimes \beta , y' \otimes \beta'\} & = 0 . 
\end{align*}
Here, $\<x^*, y\>_\fg$ denotes the linear pairing between $\fg$ and $\fg^*$ and $\int_U\alpha \beta$ denotes the linear pairing between compactly supported distributional differential forms and differential forms. \brian{how to say this now}
The bracket is extended to the entire symmetric algebra by using the graded Leibniz rule.
\end{proof}

Next, we provide a construction of a factorization sc-pair on the manifold $M$ from the data of a constructible factorization algebra on $M \times \RR_{\geq 0}$. 
Suppose $\bA$ is any constructible factorization algebra on a manifold with boundary $M \times \RR_{\geq 0}$. 
Let $\pi : M \times \RR_{\geq 0} \to M$ be the projection and denote by $\pi|_{M \times \RR_{>0}}$ its restriction to the interior. 
Define the following two factorization algebras on $M$:
\begin{align*}
\bA^\circ & = \left(\left.\pi\right|_{M \times \RR_{>0}} \right)_* \bA \\
\bA^\partial & = \pi_* \bA
\end{align*}
It is immediate to check that $(\bA^\circ, \bA^\partial)$ form a factorization sc-pair in the sense of Definition \ref{dfn:pair}. 
In fact, this construction determines a functor from the category of constructible factorization algebras on $M \times \RR_{\geq 0}$ to factorization sc-pairs on $M$.

We are now ready to prove Proposition \ref{prp:pair}.

\begin{proof}[Proof of Proposition \ref{prp:pair}]
To exhibit this quasi-isomorphism, we introduce the following cochain maps.
For an open set $V \subset M$ let
\[
\int_{\RR_{>0}} : \Omega_c(V \times \RR_{>0}) \to \Omega_c (U) [1] 
\] 
be the map which integrates a compactly supported form on $U \times \RR_{> 0}$ along $\RR_{> 0}$. 
This map is a quasi-isomorphism for any $U$ and, in fact, admits the following explicit retract. 
Let $\phi$ be a fixed compactly supported function on $\RR$ of mass $1$ and define
\[
r_\phi : \Omega_c(U) [1] \to \Omega_c (U \times \RR_{\geq 0})
\]
by $r_\phi (\alpha) = \alpha \wedge \phi \, \d t$. 

Notice that for an open set $V \subset M$ we have 
\[
\bC_n(\fg)^{\circ} (V) = \clies \bigg(\fg \otimes \Omega (V \otimes \RR_{>0} ) \; , \; \Sym \left(\fg \otimes \Omega_c(V \times \RR_{>0}) [2] \right) \bigg)  .
\]
The map $\int_{\RR_{>0}}$ induces a map of factorization algebras on $M$
\[
\int_{\RR_{>0}} : \bC_n(\fg)^\circ \to {\rm Gr} \; \bZ_n (\fg)
\]
which on linear elements in ${\rm Sym}(\fg \otimes \Omega^\bu_c (V \times \RR_{>0})$ sends $x \otimes \alpha \in \Omega^\bu_c(V \times \RR_{>0})[2]$ to $x \otimes \int_{\RR_{>0}} \alpha \in \Omega^\bu_c (V)[1]$. 
Using the retract $r_\phi$, we see that this is a quasi-isomorphism of factorization algebras on $M$. 

Similarly, integration of compactly supported forms along $\RR_{\geq 0}$ determines a quasi-isomorphism of factorization algebras $\int_{\RR_{\geq 0}} : \bC_n(\fg)^\partial \to {\rm Gr} \; \bU_n(\fg)$.
\brian{I should spell this out now.}

The pair of maps $(\int_{\RR_{>0}} , \int_{\RR_{\geq 0}})$ is a quasi-isomorphism of factorization sc-pairs. 
An explicit and direct calculation verifies that this quasi-isomorphism respects the Poisson brackets. 
\end{proof}

\subsection{Bulk-boundary topological field theory}

In this section, we describe a relationship between our model of the $\EE_n$ center and a certain topological field theory. 
This theory admits a natural description via the AKSZ formalism \cite{AKSZ}, which we briefly recount now. 

For any Lie group $G$, there is a gauge theory defined in any dimension known as {\em topological BF theory}.
Let the ``spacetime'' be an $(n+1)$-dimensional manifold $N$, 
which for now we assume has no boundary $\partial N = \emptyset$. 
For a field theory, there is a system of PDE, known as the equations of motion, that govern the behavior of the system.
When $N$ is compact, the moduli space of ``solutions to the equations of motion'' for topological BF theory is provided the mapping space 
\begin{equation} 
\label{stack1}
{\rm Map}(N_{\rm dR} ,  {\rm T}^*[n] {\rm B} G),
\end{equation}
where $N_{\rm dR}$ denotes the de Rham stack of $N$ and where ${\rm B}G$ is the classifying stack of $G$.
Via the canonical $n$-shifted symplectic structure on ${\rm T}^* [n] {\rm B} G$, 
the AKSZ construction equips this mapping space with a $(-1)$-shifted symplectic structure. 
On manifolds without boundary, this procedure describes topological BF theory in the Batalin--Vilkovisky formalism~\cite{BV}. 

Now, suppose that our compact manifold $N$ has non-empty boundary $\partial N \ne 0$.
Then (\ref{stack1}) no longer admits a $(-1)$-shifted symplectic structure. 
In this case, the AKSZ construction equips 
\[
{\rm Map}(\partial N_{\rm dR} , {\rm T}^* [n] {\rm B} G)
\]
with a $0$-shifted symplectic structure. 
Moreover, the map that restricts a map from all of $N$ to its boundary
\[
{\rm Map}(N_{\rm dR} , {\rm T}^* [n] {\rm B} G) \to {\rm Map}(\partial N_{\rm dR} , {\rm T}^* [n] {\rm B} G)
\]
is a Lagrangian morphism. 

For topological BF theory, this $0$-shifted symplectic manifold admits another natural Lagrangian ``subspace.'' 
In terms of mapping stacks, it is given by maps from $\partial N_{\rm dR}$ into the $n$-shifted conormal bundle of ${\rm B} G$:
\[
{\rm Map}(\partial N_{\rm dR} , {\rm N}^*_e [n] {\rm B}G) .
\]
The fiber product
\[
\begin{tikzcd}
X \ar[r] \ar[d] & {\rm Map} (N , {\rm T}^* [n] {\rm B} G) \ar[d] \\
{\rm Map}(\partial N_{\rm dR} , {\rm N}^*_e  [n] {\rm B}G) \ar[r] & {\rm Map}(\partial N_{\rm dR} , {\rm T}^*[n]  {\rm B}G)
\end{tikzcd}
\]
is then equipped with a $(-1)$-shifted symplectic structure. 
From the point of view of classical physics, 
we view the algebra of functions $\cO_X$ on $X$ as the {\em classical observables} of topological BF theory with these boundary conditions.

\owen{Brian: please edit this paragraph.}
Although we have started here with a Lie group $G$, 
one can replace $T^*[n] {\rm B}G$ with {\em any} $n$-shifted symplectic derived stack.
Such AKSZ theories encompass examples of interest in physics (e.g., the A- and B-models or Rozansky-Witten theories).
Of particular interest to us here are the shifted cotangent spaces~$T^*[n] X$.

We now turn to relating these ideas to the constructions of this paper.

It is the central theme of \cite{CG1, CG2} that the observables of a {\em perturbative} field theory define the structure of a factorization algebra. 
Moreover, the observables are equipped with the structure of a $\PP_0$ factorization algebra.

Perturbative BF theory for the group $G$ is the formal moduli space is defined by the formal neighborhood of a point in a derived mapping space such as (\ref{stack1}). 
For simplicity, consider working around the trivial $G$-bundle. 
Here, the formal moduli space is described in terms of the following dg Lie algebra 
\begin{equation}\label{eqn:fields}
\cL = \Omega^{\bu} (N) \otimes \fg \ltimes \Omega^{\bu} (N) \otimes \fg^* [n-3] .
\end{equation}
We denote elements of this dg Lie algebra by pairs~$(A,B)$. 

\begin{rmk}
In the physics literature, one does not work with the $L_\infty$ algebra $\fg$ arising from a formal moduli space,
but the shifted $L_\infty$ algebra $\fg[1]$. 
In physical terminology, the classical {\em fields} here are $A$ and $B$, 
and the $(-1)$-shifted symplectic structure on the fields is~$\int A \wedge B$. 
\end{rmk}

Perturbatively, the classical moduli space is the space of Maurer--Cartan elements of this dg Lie algebra.
These are pairs $(A,B)$ where $A \in \Omega^1 (N) \otimes \fg$ and $B \in \Omega^{n-1} (N) \otimes \fg^*$ satisfying the equations
\begin{align*}
\d A + \frac12 [A,A] & = 0 \\
\d B + [A,B] & = 0 ,
\end{align*}
which ask for a flat $G$-connection $\d + A$ and a flat section $B$ in the coadjoint bundle.

As noted earlier, we could replace ${\rm B}G$ by any (reasonable) derived stack $X$.
In that setting, the ordinary Lie algebra $\fg$ is replaced by the $L_\infty$ algebra describing the formal neighborhood of some point on $X$.
(Or, more generally, the $L_\infty$ algebra describing the formal neighborhood around some point on the whole mapping space.)
Indeed, we might as well view $\fg$ as an arbitrary $L_\infty$ algebra,
which we will do for the remainder of this section. 

\begin{rmk}
The $L_\infty$ algebra $\cL$ in (\ref{eqn:fields}) can be enhanced to a sheaf of $L_\infty$ algebras,
and it can be understood as a generalized topological BF theory. 
In the setup of \cite{CG2}, the factorization algebra of classical observables of generalized topological BF theory is given by the Chevalley--Eilenberg cochains $\clies (\cL)$.   
The $\PP_0$ structure is induced from the explicit $(-1)$-symplectic pairing $\int A \wedge B$ at the level of the fields. 
\end{rmk}

So far, we have provided a description of perturbative BF theory on manifolds without boundary. 
More recently, in \cite{ButsonYoo} and \cite{Eugene}, 
it is shown how to extend the perturbative BV formalism to manifolds with boundary, 
which we follow in the definition below. 

\begin{dfn}
Let $M$ be an $n$-dimensional manifold and let $\fg$ be an $L_\infty$ algebra. 
{\em Topological BF theory with its universal Neumann boundary condition} is the classical BV theory on $M \times \RR_{\geq 0}$ described by the following constructible sheaf $\cL$ of $L_\infty$ algebras:
\begin{itemize}
\item[(1)] 
The bulk theory is perturbative topological BF theory on $M \times \RR_{>0}$. 
That is, to an open set $U \subset M \times \RR_{>0}$ the theory is described by the $L_\infty$ algebra 
\[
\cL (U) = \Omega^{\bu} (U) \otimes \fg [1] \ltimes \Omega^{\bu} (U) \otimes \fg^* [n-3] .
\]
\item[(2)] 
To an open set $V \times [0,\epsilon)$, we assign the (abelian) $L_\infty$ algebra
\[
\cL (V \times [0,\epsilon)) = \Omega^{\bu} (V \times [0,\epsilon)) \otimes \fg^* [n-3] .
\]
\end{itemize}
\end{dfn}

By definition, the classical observables of perturbative BF theory suppported on an open set $U \subset M \times \RR_{\geq 0}$ is the cochain complex $\clies (\cL (U))$. 
In \cite{Eugene}, it is shown that the assignment $U \mapsto \clies (\cL(U))$ has the structure of a constructible factorization algebra on $M \times \RR_{\geq 0}$. 

The main result of this section is that the classical observables are equivalent to our constructible model for the classical limit of the $\EE_n$ center. 

\begin{prp}
There is a quasi-isomorphism of constructible factorization algebras on $M \times \RR_{\geq 0}$:
\[
\bC_n (\fg) \xto{\simeq} \clies(\cL) .
\]
\end{prp}

\owen{$\PP_0$ algebras?}

\begin{proof}
\brian{we should just cite our paper with Eugene for this, with a few comments about what changes}
Suppose $V \times [0,\epsilon) \subset M \times \RR_{\geq 0}$ is an open set. 
Then, as cochain complexes 
\[
\clie^\bu(\cL(V \times [0,\epsilon)) = {\rm Sym} \left(\Bar{\Omega}^\bu_c(V \times [0,\epsilon) [2] \right)  .
\]
Here $\Bar{\Omega}^\bu_c$ denotes the compactly supported distributional de Rham forms. 
By ellipticity, the inclusion $\Omega^\bu \hookrightarrow \Bar{\Omega}^\bu_c$ is a quasi-isomorphism which induces a quasi-isomorphism
\[
\bC_n(\fg) (V \times [0,\epsilon)) \hookrightarrow \clie^\bu(\cL(V \times [0,\epsilon)) 
\]
as desired. 
The quasi-isomorphism for the value of the factorization algebras on open sets $U \subset M \times \RR_{>0}$ is defined similarly. 
\end{proof}

\owen{Consider referring back to the Koszul pairing (in the calculus section) to talk about Neumann vs Dirichlet boundary conditions.}


\begin{rmk} Examples

Poisson $\sigma$-model. 
$B$-model. 
cite paper with Eugene.
Kapustin-Witten. 
\end{rmk}

\subsection{Factorization homology on manifolds with boundary}

We conclude by describing a useful application of this work back in algebraic topology.
The factorization sc-pair $(\bZ_n(\fg), \bU_n \fg)$ makes it quick and convenient to compute factorization homology over an $n$-dimensional manifold,
but that model is not amenable to computations over $n+1$-dimensional manifolds with boundary,
because $\bZ_n(\fg)$ is not explicitly described as a factorization algebra on $n+1$-dimensional manifolds.
Our work in this section does provide, however, an explicit description of~$\Gr {\frak Z}_n(\fg)$. 
Thus, we have access to the beginning of a spectral sequence.

\begin{prp}
Let $M$ be an $n+1$-dimensional manifold with boundary $\partial M$. 
As $(\frak{Z}_n(\fg), \UU_n \fg)$ form a filtered algebra over the Swiss cheese operad, 
there is a spectral sequence
\[
\int_{(M,\partial M)} (\Gr \frak{Z}_n(\fg), \Gr \UU_n \fg) \Longrightarrow \int_{(M,\partial M)} (\frak{Z}_n(\fg), \UU_n \fg).
\]
\end{prp}

\bibliographystyle{alpha}  
\bibliography{centralize}

%\bibliographystyle{spmpsci}  

\end{document}
We call $\ev_f$ the 
$g: Sym(\fg \otimes \Omega (U_J) [1]) \longrightarrow B(U_J) $
let $f\otimes X  $ be an 
element in $\cliels\big(\fg \otimes \Omega^\bu , B\big) \otimes \cliels\big(\fg \otimes \Omega_c^* \big)$.  
Let 


, since  



Recall that we have a factorization algebra map~\eqref{eq:DefofFonFaclevel}  $\mathbf{f}: \cliels(\fg \otimes \Omega_c^* \to B$.
The unital factorization algebra is given, for any open $U$, by $k(U)=k$.


which gives us,  for any integer $n$, maps 
\begin{multline}
 Sym^n\big(\fg \otimes \Omega^\bu_c(U)[1]\big) \otimes Sym^p \big( \fg \otimes \Omega^\bu (U)[-1] ,B(U)\big) \\
 \stackrel{\Delta \otimes id}\longrightarrow 
 \bigoplus_{q} Sym^{n-q}\big(\fg \otimes \Omega^\bu_c(U)[1]\big) \otimes  Sym^q\big(\fg \otimes \Omega^\bu_c(U)[1]\big) 
 \otimes Sym^p \big( \fg \otimes \Omega^\bu (U)[-1] , B(U)\big)
 \\ 
 \stackrel{\id \otimes ev}\longrightarrow Sym^{n-p}\big(\fg \otimes \Omega^\bu_c(U)\big) \otimes B(U)  \hookrightarrow
 \cliels\big(\fg \otimes \Omega_c^*(U), B(U) \big) 
\end{multline}



\def \Fac {\mathrm{Fac}}
We now need to express the $\EE_n$ structure on ${\rm Mor}_{\LMod_{\int_{S^{n-1}} \UU_n\fg}}(\UU_n \fg, B_f)$ induced by the equivalence of Proposition~\ref{P:ModentoModSn}, and then on the subsequent isomorphic hom spaces of modules morphisms.  Since we are going to take advantage of the factorization algebra presentation of $\UU_n( \fg)$, see~Theorem~\ref{T:UnofLie}, we recall the following factorization algebra description of the centralizer.
Let $\cA \stackrel{f}\to \cB$ be a morphism of locally constant factorization algebras on $\RR^n$ corresponding to an $\EE_n$ algebra map similarly denoted. Then by Theorems~\ref{thm:lurie1}, \ref{T:centralizer=inthom} the centralizer of $f$ is represented by the locally constant factorization algebra  
${\rm Mor}_{\Fac_{\cA}}(\cA, \cB_f)$ which is the internal mapping object  of maps from $\cA$ to $\cB_f$ in the $\infty$-category of locally constant factorization algebras on $\RR^n$ which are a $\cA$-module. 

The factorization algebra structure is 
represented as follows, see~\cite{GTZ3}: let $\cU =\big((U_i)_{i=1\dots r}, V\big)$ be a collection pairwise disjoint open convex subdisks $U_i$ of a disk $V$ and $(\phi_i: \cA\to \cB_f)_{i=1\dots r}$ be $\cA$-module maps of factorization algebras. 
To this data we need to associate a factorization algebra map 
$$\rho_{\cU}^{(\phi_i)} : \cA \longrightarrow \cB .$$
First since $V$ is a disk, the structure maps $\cA(V) \to \cA(\RR^n)$ and $\cB(V)\to \cB(\RR^n)$ are equivalences so that it is sufficient to define $\rho_{\cU}^{(\phi_i)}$ on the restrictions $\cA_{V}$, $\cB_{V}$ of the factorization algebras to $V$ or equivalently to treat only the case where $V =\RR^n$  which we assume now.
Then $\rho_{\cU}^{(\phi_i)}$ is given by a chain complex map $\cA(W)\to \cB_f(W)$ for any open $W \subset \RR^n$.  
Now we use the fact that the data of $\cU$ gives us a natural way of computing $\cA(W)$, $\cB_f (W)$ using the Cech complex $\check{C}(-,\cW)$ of a factorization algebra with values in a factorizing cover. Namely, we have canonical equivalences 
$$\check{C}(\cA, W_\cU) \stackrel{\simeq}\to \cA(W), \qquad  \check{C}(\cB_f, W_\cU) \stackrel{\simeq}\to \cB_f(W)$$ 
where $\W_{\cU}$ is the cover of $W$ given by $W_1=W\cap U_1, \dots, W_r=W\cap U_r, W^c$ where $W^c$ is the intersection of $W$ with an open $U^c$ that contains the complement of the $U_i$'s but not any of the $U_i$. Note that by definition of a factorization algebra, $\check{C}(\cA, W_\cU)$ is  a direct sum of tensors of the form 
$\cA(W'_1) \otimes \cdots \cA(W_r') \otimes \cA((W')^c) $ where $W'_i$ are subsets of $U_i$, $(W')^c$ is a subset $U^c$. 

Then the map $
\cA(W) \stackrel{\rho_{\cU}^{(\phi_i)}(W)}\longrightarrow \cB_f(W)$ is uniqueley determined by the commutative diagram 
\begin{equation}\label{eq:Cechassociatedtoconfofdisks}
\xymatrix{\cA(W) \ar[rr]^{\rho_{\cU}^{(\phi_i)}(W)}&& \cB_f(W) \\
\check{C}(\cA, W_\cU) \ar[u]_{\simeq}   \ar[rr]_{\check{\rho}_{\cU}^{(\phi_i)}}&& \check{C}(\cB_f, W_\cU) \ar[u]^{\simeq} } 
\end{equation}
where the lower map $\check{\rho}_{\cU}^{(\phi_i)}$ is given by $\phi_i(W'_i): \cA(W'_i) \to \cB_f(W'_i)$ on $W_i'$ and by $id: \cA((W')^c) \to \cA((W')^c)=\cB_f((W')^c)$ on $(W')^c$. Note that the fact that the $\phi_i$ are precisely $\cA$-module maps where the module structure of $\cB_f$ is induced by $f$ induced that $\rho_{\cU}^{(\phi_i)}$ is indepedent of the choice of $U^c$. Indeed, by definition of a map of $\cA$-modules in factorization algebras, we have that such a map computed on the complement of a compact set containing the isobarycenter of its domain  in $\RR^n$ is given by the identity evaluate on $\cA$ of this complement.  Further, for the same reason we have
\begin{lmm} \label{L:reductiontodisks}
 Let $\xymatrix{ \cB \ar[r]^{g} \ar[d]^{h} & \cB' \ar[d]_{h'} \\ \cC \ar[r]^{g'} & \cC'}$ be a diagramm in the $\infty$-category of $\cA$-modules. If the restriction 
 $$\xymatrix{ \cB_{\coprod U_i} \ar[r] \ar[d] & \cB'_{\coprod U_i} \ar[d] \\ 
 \cC_{\coprod U_i} \ar[r] & \cC'_{\coprod U_i}}$$ of this diagram  to the union $\coprod U_i$   is commutative then so is the original diagram.
\end{lmm}
\begin{proof}
 Using the diagramm~\eqref{eq:Cechassociatedtoconfofdisks}, it is equivalent to prove that the following diagram 
 \xymatrix{ \check{C}(\cB, _\cU)\ar[r] \ar[d] & \check{C}(\cB', _\cU) \ar[d] \\ \check{C}(\cC, _\cU\ar[r] & \check{C}(\cC', _\cU}
 is commutative. But the map $\check{C}(\cB, _\cU) \to \check{C}(\cB', _\cU)$ 
 is induced by the direct sums of tensors products of chain maps $ g(W_i): \cB(U_i)= \cB_{U_i}(W_i) \to \cB'_{U_i} (W_i)$ on each $i=1\dots r$ and 
 by $id: \cB(W^c) \to \cB'(W^c)$.
\end{proof}


We now apply this to the special case of $\UU_n(\fg)$, that is for $\cA= \cliels(\Omega^\bu_c \otimes \fg)$ as we have seen. 
\begin{lmm}
 There is a commutative diagram 
 \[ \xymatrix{ \Sym( \fg[1-n])^{\otimes r} \ar[r]^{\simeq}& \bigotimes_{i=1}^r\cliels(\Omega^\bu_c(U_i) \otimes \fg) \ar[d]^{\rho} \ar[r]^{\bigotimes \phi_i(U_i)}  & \cB_f(U_1)\otimes \cdots \otimes B_f(U_r) \ar[d]^{\rho} \\ 
\Sym( \fg[1-n]) \ar[u]^{\delta^{r}} \ar[r]^{\simeq} & \cliels(\Omega^\bu_c(V) \otimes \fg) \ar[r]_{\rho_{\cU}^{(\phi_i)}(V)}& \cB_f(V)  } \] where $\delta^r$ is the iterated cocommuative coproduct. 
\end{lmm}
\begin{proof}
 The commtativity of the right square follows from~\eqref{eq:Cechassociatedtoconfofdisks}. For the left square, note that the factorization algebra structure maps on $\cliels(\Omega^\bu_c \otimes \fg)$ 
 are induced by applying the Chevalley-Eilenberg chain functor to the canonical maps of cosheaves of Lie algebras $\bigoplus_{i=1}^{r} (\Omega^\bu_c(U_i)\otimes \fg) \cong \Omega^\bu_c(\coprod U_i) \otimes \fg \longrightarrow  \Omega^\bu_c(V)\otimes \fg $. 
\end{proof}
